<!DOCTYPE html>
<!-- saved from url=(0072)https://medium.com/@gusiol/nestjs-with-mongodb-native-driver-9d82e377d55 -->
<html lang="en" data-rh="lang"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><script async="" src="./NestJS with MongoDB native driver _ by Gustavo Simões _ Medium_files/branch-latest.min.js.download"></script><script async="" src="./NestJS with MongoDB native driver _ by Gustavo Simões _ Medium_files/analytics.js.download"></script><script>!function(c,f){var t,o,i,e=[],r={passive:!0,capture:!0},n=new Date,a="pointerup",u="pointercancel";function p(n,e){t||(t=e,o=n,i=new Date,w(f),s())}function s(){0<=o&&o<i-n&&(e.forEach(function(n){n(o,t)}),e=[])}function l(n){if(n.cancelable){var e=(1e12<n.timeStamp?new Date:performance.now())-n.timeStamp;"pointerdown"==n.type?function(n,e){function t(){p(n,e),i()}function o(){i()}function i(){f(a,t,r),f(u,o,r)}c(a,t,r),c(u,o,r)}(e,n):p(e,n)}}function w(e){["click","mousedown","keydown","touchstart","pointerdown"].forEach(function(n){e(n,l,r)})}w(c),self.perfMetrics=self.perfMetrics||{},self.perfMetrics.onFirstInputDelay=function(n){e.push(n),s()}}(addEventListener,removeEventListener)</script><script defer="" src="./NestJS with MongoDB native driver _ by Gustavo Simões _ Medium_files/16180790160.js.download"></script><title>NestJS with MongoDB native driver | by Gustavo Simões | Medium</title><meta data-rh="true" name="viewport" content="width=device-width,minimum-scale=1,initial-scale=1"><meta data-rh="true" name="theme-color" content="#000000"><meta data-rh="true" name="twitter:app:name:iphone" content="Medium"><meta data-rh="true" name="twitter:app:id:iphone" content="828256236"><meta data-rh="true" property="al:ios:app_name" content="Medium"><meta data-rh="true" property="al:ios:app_store_id" content="828256236"><meta data-rh="true" property="al:android:package" content="com.medium.reader"><meta data-rh="true" property="fb:app_id" content="542599432471018"><meta data-rh="true" property="og:site_name" content="Medium"><meta data-rh="true" property="og:type" content="article"><meta data-rh="true" property="article:published_time" content="2020-06-15T20:56:06.320Z"><meta data-rh="true" name="title" content="NestJS with MongoDB native driver | by Gustavo Simões | Medium"><meta data-rh="true" property="og:title" content="NestJS with MongoDB native driver"><meta data-rh="true" property="twitter:title" content="NestJS with MongoDB native driver"><meta data-rh="true" name="twitter:site" content="@Medium"><meta data-rh="true" name="twitter:app:url:iphone" content="medium://p/9d82e377d55"><meta data-rh="true" property="al:android:url" content="medium://p/9d82e377d55"><meta data-rh="true" property="al:ios:url" content="medium://p/9d82e377d55"><meta data-rh="true" property="al:android:app_name" content="Medium"><meta data-rh="true" name="description" content="Implementing NestJS with MongoDB using NodeJS native driver as an alternative to Mongoose with better performance, native MongoDB syntax and simple and intuitive coding experience."><meta data-rh="true" property="og:description" content="Let’s build a application with NestJS and MongoDB."><meta data-rh="true" property="twitter:description" content="Let’s build a application with NestJS and MongoDB."><meta data-rh="true" property="og:url" content="https://medium.com/@gusiol/nestjs-with-mongodb-native-driver-9d82e377d55"><meta data-rh="true" property="al:web:url" content="https://medium.com/@gusiol/nestjs-with-mongodb-native-driver-9d82e377d55"><meta data-rh="true" property="og:image" content="https://miro.medium.com/max/1200/1*jiqgT2HxAe1c_48yEdcZwQ.png"><meta data-rh="true" name="twitter:image:src" content="https://miro.medium.com/max/1200/1*jiqgT2HxAe1c_48yEdcZwQ.png"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="article:author" content="https://medium.com/@gusiol"><meta data-rh="true" name="author" content="Gustavo Simões"><meta data-rh="true" name="robots" content="index,follow,max-image-preview:large"><meta data-rh="true" name="referrer" content="unsafe-url"><meta data-rh="true" name="twitter:label1" value="Reading time"><meta data-rh="true" name="twitter:data1" value="4 min read"><meta data-rh="true" name="parsely-post-id" content="9d82e377d55"><link data-rh="true" rel="search" type="application/opensearchdescription+xml" title="Medium" href="https://medium.com/osd.xml"><link data-rh="true" rel="apple-touch-icon" sizes="152x152" href="https://cdn-images-1.medium.com/fit/c/152/152/1*8I-HPL0bfoIzGied-dzOvA.png"><link data-rh="true" rel="apple-touch-icon" sizes="120x120" href="https://cdn-images-1.medium.com/fit/c/120/120/1*8I-HPL0bfoIzGied-dzOvA.png"><link data-rh="true" rel="apple-touch-icon" sizes="76x76" href="https://cdn-images-1.medium.com/fit/c/76/76/1*8I-HPL0bfoIzGied-dzOvA.png"><link data-rh="true" rel="apple-touch-icon" sizes="60x60" href="https://cdn-images-1.medium.com/fit/c/60/60/1*8I-HPL0bfoIzGied-dzOvA.png"><link data-rh="true" rel="mask-icon" href="https://cdn-static-1.medium.com/_/fp/icons/monogram-mask.KPLCSFEZviQN0jQ7veN2RQ.svg" color="#171717"><link data-rh="true" id="glyph_link" rel="stylesheet" type="text/css" href="./NestJS with MongoDB native driver _ by Gustavo Simões _ Medium_files/unbound.css"><link data-rh="true" rel="author" href="https://medium.com/@gusiol"><link data-rh="true" rel="canonical" href="https://medium.com/@gusiol/nestjs-with-mongodb-native-driver-9d82e377d55"><link data-rh="true" rel="alternate" href="android-app://com.medium.reader/https/medium.com/p/9d82e377d55"><script data-rh="true">(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
ga('create', 'UA-24232453-2', 'auto');
ga('send', 'pageview');</script><link rel="preload" href="./NestJS with MongoDB native driver _ by Gustavo Simões _ Medium_files/16180790160.js.download" as="script"><style type="text/css" data-fela-rehydration="453" data-fela-type="STATIC">html{box-sizing:border-box}*, *:before, *:after{box-sizing:inherit}body{margin:0;padding:0;text-rendering:optimizeLegibility;-webkit-font-smoothing:antialiased;color:rgba(0,0,0,0.8);position:relative;min-height:100vh}h1, h2, h3, h4, h5, h6, dl, dd, ol, ul, menu, figure, blockquote, p, pre, form{margin:0}menu, ol, ul{padding:0;list-style:none;list-style-image:none}main{display:block}a{color:inherit;text-decoration:none}a, button, input{-webkit-tap-highlight-color:transparent}img, svg{vertical-align:middle}button{background:transparent;overflow:visible}button, input, optgroup, select, textarea{margin:0}</style><style type="text/css" data-fela-rehydration="453" data-fela-type="KEYFRAME">@-webkit-keyframes k1{0%{transform:scale(1)}50%{transform:scale(1.1)}100%{transform:scale(1)}}@-moz-keyframes k1{0%{transform:scale(1)}50%{transform:scale(1.1)}100%{transform:scale(1)}}@keyframes k1{0%{transform:scale(1)}50%{transform:scale(1.1)}100%{transform:scale(1)}}@-webkit-keyframes k2{0%{opacity:0.8}50%{opacity:0.5}100%{opacity:0.8}}@-moz-keyframes k2{0%{opacity:0.8}50%{opacity:0.5}100%{opacity:0.8}}@keyframes k2{0%{opacity:0.8}50%{opacity:0.5}100%{opacity:0.8}}@-webkit-keyframes k3{0%{transform:matrix(0.97, 0, 0, 1, 0, 12);opacity:0}20%{transform:matrix(0.99, 0, 0, 1, 0, 2);opacity:0.7}40%{transform:matrix(1, 0, 0, 1, 0, -1);opacity:1}70%{transform:matrix(1, 0, 0, 1, 0, 0);opacity:1}100%{transform:matrix(1, 0, 0, 1, 0, 0);opacity:1}}@-moz-keyframes k3{0%{transform:matrix(0.97, 0, 0, 1, 0, 12);opacity:0}20%{transform:matrix(0.99, 0, 0, 1, 0, 2);opacity:0.7}40%{transform:matrix(1, 0, 0, 1, 0, -1);opacity:1}70%{transform:matrix(1, 0, 0, 1, 0, 0);opacity:1}100%{transform:matrix(1, 0, 0, 1, 0, 0);opacity:1}}@keyframes k3{0%{transform:matrix(0.97, 0, 0, 1, 0, 12);opacity:0}20%{transform:matrix(0.99, 0, 0, 1, 0, 2);opacity:0.7}40%{transform:matrix(1, 0, 0, 1, 0, -1);opacity:1}70%{transform:matrix(1, 0, 0, 1, 0, 0);opacity:1}100%{transform:matrix(1, 0, 0, 1, 0, 0);opacity:1}}</style><style type="text/css" data-fela-rehydration="453" data-fela-type="RULE">.a{font-family:medium-content-sans-serif-font, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen, Ubuntu, Cantarell, "Open Sans", "Helvetica Neue", sans-serif}.b{font-weight:400}.c{background-color:rgba(255, 255, 255, 1)}.l{height:100vh}.m{width:100vw}.n{display:flex}.o{align-items:center}.p{justify-content:center}.q{height:35px}.r{fill:rgba(41, 41, 41, 1)}.s{padding-top:8px}.t{width:100%}.u{border-bottom:1px solid rgba(230, 230, 230, 1)}.v{min-height:160px}.w{display:block}.x{flex-direction:column}.y{display:none}.ab{position:relative}.ac{z-index:500}.aj{max-width:1192px}.ak{min-width:0}.al{height:62px}.am{flex-direction:row}.an{flex:1 0 auto}.ao{border-radius:1000px}.ap{background-color:rgba(255, 255, 255, 0.8)}.aq{padding:6px}.ar{visibility:hidden}.as{margin-left:0px}.at{font-family:sohne, "Helvetica Neue", Helvetica, Arial, sans-serif}.au{font-size:14px}.av{line-height:20px}.aw{color:rgba(117, 117, 117, 1)}.ax{color:rgba(26, 137, 23, 1)}.ay{fill:rgba(26, 137, 23, 1)}.az{font-size:inherit}.ba{border:inherit}.bb{font-family:inherit}.bc{letter-spacing:inherit}.bd{font-weight:inherit}.be{padding:0}.bf{margin:0}.bg:hover{cursor:pointer}.bh:hover{color:rgba(15, 115, 12, 1)}.bi:hover{fill:rgba(15, 115, 12, 1)}.bj:disabled{cursor:default}.bk:disabled{color:rgba(26, 137, 23, 0.3)}.bl:disabled{fill:rgba(26, 137, 23, 0.3)}.bm{height:25px}.bn{justify-content:space-between}.bs{align-items:flex-start}.bt{margin-bottom:0px}.bu{margin-top:-40px}.bv{align-items:flex-end}.bw{flex-wrap:wrap}.bx{margin-top:40px}.by{margin-right:24px}.bz{font-weight:700}.ca{font-size:27px}.cb{line-height:34px}.cc:before{margin-bottom:-14px}.cd:before{content:""}.ce:before{display:table}.cf:before{border-collapse:collapse}.cg:after{margin-top:-6px}.ch:after{content:""}.ci:after{display:table}.cj:after{border-collapse:collapse}.ck{letter-spacing:0}.cl{color:rgba(25, 25, 25, 1)}.cm{word-break:break-word}.co{font-size:16px}.cp{line-height:24px}.cq:before{margin-bottom:-10px}.cr{color:rgba(41, 41, 41, 1)}.cs{margin-left:12px}.ct{margin-right:12px}.cu{color:inherit}.cv{fill:inherit}.cw:hover{color:rgba(25, 25, 25, 1)}.cx:hover{fill:rgba(25, 25, 25, 1)}.cy:disabled{color:rgba(117, 117, 117, 1)}.cz:disabled{fill:rgba(117, 117, 117, 1)}.da{flex:0 0 auto}.db{justify-self:flex-end}.dc{height:32px}.dd{overflow:visible}.de{fill:rgba(117, 117, 117, 1)}.df:hover{fill:rgba(8, 8, 8, 1)}.dg{outline:none}.dh{padding:4px}.di{margin-left:8px}.dj{margin-right:10px}.dk{margin-top:16px}.dl{margin-bottom:16px}.dm{display:inherit}.dn{max-width:210px}.do{text-overflow:ellipsis}.dp{overflow:hidden}.dq{white-space:nowrap}.dr{display:inline-block}.ds{border:none}.dt{font:inherit}.du{opacity:0}.dv{background-color:transparent}.dw::placeholder{color:rgba(117, 117, 117, 1)}.dx{padding:0px}.dy{width:0px}.dz{transition:width 140ms ease-in, padding 140ms ease-in}.ea{padding-left:24px}.eb{padding-right:24px}.ec{margin-left:auto}.ed{margin-right:auto}.ee{max-width:728px}.ef{box-sizing:border-box}.eg{position:absolute}.eh{left:0}.ei{top:calc(100vh + 100px)}.ej{bottom:calc(100vh + 100px)}.ek{width:10px}.el{pointer-events:none}.em{word-wrap:break-word}.en:after{display:block}.eo:after{clear:both}.ep{max-width:680px}.eq{line-height:1.23}.er{font-style:normal}.fm{margin-bottom:-0.27em}.fn{margin-top:32px}.fr{border-radius:50%}.fs{height:28px}.ft{width:28px}.fu{margin:0 4px}.fv{margin:0 7px}.ge{padding-right:6px}.gf{margin-right:8px}.gg{fill:rgba(61, 61, 61, 1)}.gh{margin-right:-6px}.gi:focus{fill:rgba(8, 8, 8, 1)}.gj{max-width:1765px}.gk{margin-top:33px}.gl{clear:both}.gm{transition:transform 300ms cubic-bezier(0.2, 0, 0.2, 1)}.gn{cursor:zoom-in}.go{z-index:auto}.gp{transition:opacity 100ms 400ms}.gq{top:0}.gr{height:100%}.gs{will-change:transform}.gt{transform:translateZ(0)}.gu{margin:auto}.gv{background-color:rgba(242, 242, 242, 1)}.gw{padding-bottom:53.37110481586402%}.gx{height:0}.gy{filter:blur(20px)}.gz{transform:scale(1.1)}.ha{visibility:visible}.hb{line-height:1.58}.hc{letter-spacing:-0.004em}.hd{font-family:charter, Georgia, Cambria, "Times New Roman", Times, serif}.hy{margin-bottom:-0.46em}.hz{list-style-type:decimal}.ia{margin-left:30px}.ib{padding-left:0px}.ih{text-decoration:underline}.ii{max-width:550px}.io{padding-bottom:54.72727272727273%}.ip{line-height:1.12}.iq{letter-spacing:-0.022em}.ir{font-weight:500}.jk{margin-bottom:-0.28em}.jq{padding:20px}.jr{background:rgba(242, 242, 242, 1)}.js{overflow-x:auto}.jt{line-height:1.18}.ju{font-family:Menlo, Monaco, "Courier New", Courier, monospace}.jv{margin-top:-0.09em}.jw{margin-bottom:-0.09em}.jx{white-space:pre-wrap}.jy{padding:2px 4px}.jz{font-size:75%}.ka> strong{font-family:inherit}.kb{padding-bottom:NaN%}.kc{margin-top:10px}.kd{text-align:center}.kg{box-shadow:inset 3px 0 0 0 rgba(41, 41, 41, 1)}.kh{padding-left:23px}.ki{margin-left:-20px}.kj{font-style:italic}.kk{will-change:opacity}.kl{position:fixed}.km{width:188px}.kn{left:50%}.ko{transform:translateX(406px)}.kp{top:calc(65px + 54px + 14px)}.ks{top:159px}.ku{width:131px}.kv{padding-bottom:28px}.kw{font-size:12px}.kx{line-height:16px}.ky{letter-spacing:0.083em}.kz{text-transform:uppercase}.la{padding-bottom:5px}.lb{padding-top:5px}.lc{padding-top:14px}.ld{padding:4px 12px 6px}.le{background:0}.lf{border-color:rgba(26, 137, 23, 1)}.lg:hover{border-color:rgba(15, 115, 12, 1)}.lh:disabled{cursor:inherit}.li:disabled{opacity:0.3}.lj:disabled:hover{color:rgba(26, 137, 23, 1)}.lk:disabled:hover{fill:rgba(26, 137, 23, 1)}.ll:disabled:hover{border-color:rgba(26, 137, 23, 1)}.lm{border-radius:4px}.ln{border-width:1px}.lo{border-style:solid}.lp{text-decoration:none}.lq{padding-top:28px}.lr{margin-bottom:19px}.ls{margin-left:-3px}.ly{outline:0}.lz{border:0}.ma{user-select:none}.mb{cursor:pointer}.mc> svg{pointer-events:none}.md:active{border-style:none}.me{-webkit-user-select:none}.mf:focus{fill:rgba(117, 117, 117, 1)}.mg:hover{fill:rgba(117, 117, 117, 1)}.mo button{text-align:left}.mp{opacity:0.4}.mq{cursor:not-allowed}.mr{padding-right:9px}.na{padding-bottom:25px}.nb{margin-top:25px}.nc{max-width:155px}.ng{top:1px}.nu{margin-left:-1px}.nv{margin-left:-4px}.od{padding-right:8px}.oe{padding-bottom:40px}.of{list-style-type:none}.og{margin-bottom:8px}.oh{font-size:13px}.oi{line-height:22px}.oj{border-radius:3px}.ok{padding:5px 10px}.ol{padding-top:40px}.oo{padding-bottom:4px}.op{padding-top:32px}.oq{background-color:rgba(250, 250, 250, 1)}.pg{display:-webkit-box}.ph{-webkit-line-clamp:1}.pi{-webkit-box-orient:vertical}.pk{padding-top:25px}.pq{max-width:100%}.pr{background:rgba(255, 255, 255, 1)}.ps{padding:32px 0}.pt{background-color:rgba(0, 0, 0, 0.9)}.pv:hover{color:rgba(255, 255, 255, 0.99)}.pw:hover{fill:rgba(255, 255, 255, 0.99)}.px:disabled{color:rgba(255, 255, 255, 0.7)}.py:disabled{fill:rgba(255, 255, 255, 0.7)}.pz{fill:rgba(255, 255, 255, 1)}.qa{height:22px}.qb{color:rgba(255, 255, 255, 0.7)}.qc{width:200px}.qf{color:rgba(255, 255, 255, 0.98)}.qg:hover{text-decoration:underline}.ql{margin-right:16px}.qm{-webkit-user-select:none}</style><style type="text/css" data-fela-rehydration="453" data-fela-type="RULE" media="all and (min-width: 1080px)">.d{display:none}.ai{margin:0 64px}.fi{font-size:46px}.fj{margin-top:0.6em}.fk{line-height:56px}.fl{letter-spacing:-0.011em}.gc{margin-left:30px}.hu{font-size:21px}.hv{margin-top:2em}.hw{line-height:32px}.hx{letter-spacing:-0.003em}.ig{margin-top:1.05em}.in{margin-top:56px}.jg{font-size:30px}.jh{margin-top:1.95em}.ji{line-height:36px}.jj{letter-spacing:0}.jp{margin-top:0.86em}.lx{margin-right:5px}.mn{margin-top:5px}.mz{padding-left:6px}.ni{display:inline-block}.nn{margin-left:7px}.no{margin-top:8px}.nt{width:25px}.ob{padding-left:7px}.oc{top:3px}.pd{font-size:20px}.pe{line-height:24px}.pf{max-height:24px}.pp{margin:0}</style><style type="text/css" data-fela-rehydration="453" data-fela-type="RULE" media="all and (max-width: 1079.98px)">.e{display:none}.gb{margin-left:30px}.ke{margin-left:auto}.kf{text-align:center}.lw{margin-right:5px}.mm{margin-top:5px}.my{padding-left:6px}.nh{display:inline-block}.nl{margin-left:7px}.nm{margin-top:8px}.ns{width:25px}.nz{padding-left:7px}.oa{top:3px}</style><style type="text/css" data-fela-rehydration="453" data-fela-type="RULE" media="all and (max-width: 903.98px)">.f{display:none}.ga{margin-left:30px}.lv{margin-right:5px}.ml{margin-top:5px}.mw{padding-left:6px}.mx{top:3px}.nf{display:inline-block}.nj{margin-left:7px}.nk{margin-top:8px}.nr{width:15px}.ny{padding-left:3px}</style><style type="text/css" data-fela-rehydration="453" data-fela-type="RULE" media="all and (max-width: 727.98px)">.g{display:none}.z{display:block}.bo{min-height:160px}.bp{align-items:flex-start}.bq{flex-direction:column}.br{justify-content:center}.cn{margin-top:20px}.fp{margin-top:32px}.fq{flex-direction:column-reverse}.fy{margin-bottom:30px}.fz{margin-left:0px}.lu{margin-left:8px}.mj{margin-top:2px}.mk{margin-right:8px}.mu{padding-left:6px}.mv{top:3px}.ne{display:inline-block}.nq{width:15px}.nx{padding-left:3px}.om{padding-top:0}.on{border-top:none}.pu{padding:32px 0}.qd{width:140px}.qe{display:flex}.qh{margin-bottom:16px}.qi{margin-top:30px}.qj{width:100%}.qk{flex-direction:row}</style><style type="text/css" data-fela-rehydration="453" data-fela-type="RULE" media="all and (max-width: 551.98px)">.h{display:none}.ae{margin:0 24px}.es{font-size:32px}.et{margin-top:0.64em}.eu{line-height:40px}.ev{letter-spacing:-0.016em}.fo{margin-top:32px}.fw{margin-bottom:30px}.fx{margin-left:0px}.he{font-size:18px}.hf{margin-top:1.56em}.hg{line-height:28px}.hh{letter-spacing:-0.003em}.ic{margin-top:1.34em}.ij{margin-top:40px}.is{font-size:22px}.it{margin-top:1.2em}.iu{letter-spacing:0}.jl{margin-top:0.67em}.lt{margin-left:8px}.mh{margin-top:2px}.mi{margin-right:8px}.ms{padding-left:6px}.mt{top:3px}.nd{display:inline-block}.np{width:15px}.nw{padding-left:3px}.or{font-size:16px}.os{line-height:20px}.ot{max-height:20px}.pl{margin:0}</style><style type="text/css" data-fela-rehydration="453" data-fela-type="RULE" media="all and (min-width: 904px) and (max-width: 1079.98px)">.i{display:none}.ah{margin:0 64px}.fe{font-size:46px}.ff{margin-top:0.6em}.fg{line-height:56px}.fh{letter-spacing:-0.011em}.hq{font-size:21px}.hr{margin-top:2em}.hs{line-height:32px}.ht{letter-spacing:-0.003em}.if{margin-top:1.05em}.im{margin-top:56px}.jc{font-size:30px}.jd{margin-top:1.95em}.je{line-height:36px}.jf{letter-spacing:0}.jo{margin-top:0.86em}.pa{font-size:20px}.pb{line-height:24px}.pc{max-height:24px}.po{margin:0}</style><style type="text/css" data-fela-rehydration="453" data-fela-type="RULE" media="all and (min-width: 728px) and (max-width: 903.98px)">.j{display:none}.ag{margin:0 48px}.fa{font-size:46px}.fb{margin-top:0.6em}.fc{line-height:56px}.fd{letter-spacing:-0.011em}.hm{font-size:21px}.hn{margin-top:2em}.ho{line-height:32px}.hp{letter-spacing:-0.003em}.ie{margin-top:1.05em}.il{margin-top:56px}.iy{font-size:30px}.iz{margin-top:1.95em}.ja{line-height:36px}.jb{letter-spacing:0}.jn{margin-top:0.86em}.ox{font-size:20px}.oy{line-height:24px}.oz{max-height:24px}.pn{margin:0}</style><style type="text/css" data-fela-rehydration="453" data-fela-type="RULE" media="all and (min-width: 552px) and (max-width: 727.98px)">.k{display:none}.af{margin:0 24px}.ew{font-size:32px}.ex{margin-top:0.64em}.ey{line-height:40px}.ez{letter-spacing:-0.016em}.hi{font-size:18px}.hj{margin-top:1.56em}.hk{line-height:28px}.hl{letter-spacing:-0.003em}.id{margin-top:1.34em}.ik{margin-top:40px}.iv{font-size:22px}.iw{margin-top:1.2em}.ix{letter-spacing:0}.jm{margin-top:0.67em}.ou{font-size:16px}.ov{line-height:20px}.ow{max-height:20px}.pm{margin:0}</style><style type="text/css" data-fela-rehydration="453" data-fela-type="RULE" media="print">.gd{display:none}</style><style type="text/css" data-fela-rehydration="453" data-fela-type="RULE" media="(prefers-reduced-motion: no-preference)">.kq{transition:opacity 200ms}</style><style type="text/css" data-fela-rehydration="453" data-fela-type="RULE" media="all and (max-width: 1230px)">.kr{display:none}</style><style type="text/css" data-fela-rehydration="453" data-fela-type="RULE" media="all and (max-width: 1198px)">.kt{display:none}</style><style type="text/css" data-fela-rehydration="453" data-fela-type="RULE" media="(orientation: landscape) and (max-width: 903.98px)">.pj{max-height:none}</style><script type="application/ld+json" data-rh="true">{"@context":"http:\u002F\u002Fschema.org","@type":"NewsArticle","image":["https:\u002F\u002Fmiro.medium.com\u002Fmax\u002F1200\u002F1*jiqgT2HxAe1c_48yEdcZwQ.png"],"url":"https:\u002F\u002Fmedium.com\u002F@gusiol\u002Fnestjs-with-mongodb-native-driver-9d82e377d55","dateCreated":"2020-06-13T00:54:03.519Z","datePublished":"2020-06-13T00:54:03.519Z","dateModified":"2020-06-17T13:52:06.279Z","headline":"NestJS with MongoDB native driver - Gustavo Simões - Medium","name":"NestJS with MongoDB native driver - Gustavo Simões - Medium","description":"Implementing NestJS with MongoDB using NodeJS native driver as an alternative to Mongoose with better performance, native MongoDB syntax and simple and intuitive coding experience.","identifier":"9d82e377d55","keywords":["Lite:true","Tag:Nestjs","Tag:Mongodb","Tag:Nodejs","Tag:Mongodb Driver","Tag:Mongoose","Topic:Javascript","Elevated:false","LockedPostSource:LOCKED_POST_SOURCE_NONE","LayerCake:4"],"author":{"@type":"Person","name":"Gustavo Simões","url":"https:\u002F\u002Fmedium.com\u002F@gusiol"},"creator":["Gustavo Simões"],"publisher":{"@type":"Organization","name":"Medium","url":"https:\u002F\u002Fmedium.com\u002F","logo":{"@type":"ImageObject","width":308,"height":60,"url":"https:\u002F\u002Fmiro.medium.com\u002Fmax\u002F308\u002F1*OMF3fSqH8t4xBJ9-6oZDZw.png"}},"mainEntityOfPage":"https:\u002F\u002Fmedium.com\u002F@gusiol\u002Fnestjs-with-mongodb-native-driver-9d82e377d55"}</script><script type="text/javascript" data-rh="true">(function(b,r,a,n,c,h,_,s,d,k){if(!b[n]||!b[n]._q){for(;s<_.length;)c(h,_[s++]);d=r.createElement(a);d.async=1;d.src="https://cdn.branch.io/branch-latest.min.js";k=r.getElementsByTagName(a)[0];k.parentNode.insertBefore(d,k);b[n]=h}})(window,document,"script","branch",function(b,r){b[r]=function(){b._q.push([r,arguments])}},{_q:[],_v:1},"addListener applyCode autoAppIndex banner closeBanner closeJourney creditHistory credits data deepview deepviewCta first getCode init link logout redeem referrals removeListener sendSMS setBranchViewData setIdentity track validateCode trackCommerceEvent logEvent".split(" "), 0);
branch.init('key_live_ofxXr2qTrrU9NqURK8ZwEhknBxiI6KBm', {metadata: {}, 'no_journeys': true, 'disable_exit_animation': true, 'disable_entry_animation': true, 'tracking_disabled': null}, function(err, data) {});</script><script charset="utf-8" src="./NestJS with MongoDB native driver _ by Gustavo Simões _ Medium_files/vendors_CollectionNewShortformEditor_CollectionPostShortformEditor_responses.editor.b368c811.chunk.js.download"></script><script charset="utf-8" src="./NestJS with MongoDB native driver _ by Gustavo Simões _ Medium_files/responses.editor.a7410b93.chunk.js.download"></script><script type="text/javascript" async="" src="./NestJS with MongoDB native driver _ by Gustavo Simões _ Medium_files/_r"></script></head><body data-new-gr-c-s-loaded="14.981.0"><div id="root"><div class="a b c"><div class="d e f g h i j k"></div><script>document.domain = document.domain;</script><div><script>if (window.self !== window.top) window.location = "about:blank"</script></div><script>window.PARSELY = window.PARSELY || {autotrack: false}</script><div class="u v w"><div class="n x c"><div class="y z"><div class="u w ab ac"><div class="n p"><div class="ae af ag ah ai aj ak t"><div class="al n o"><div class="n o am an"><div class="ao ap"><div class="aq w"><div class="ha" id="li-general-navbar-open-in-app-button"><div class="as y z"><span class="at b au av aw"><a href="https://rsci.app.link/?%24canonical_url=https%3A%2F%2Fmedium.com%2Fp%2F9d82e377d55&amp;~feature=LiOpenInAppButton&amp;~channel=ShowPostUnderUser&amp;~stage=mobileNavBar&amp;source=post_page-----9d82e377d55--------------------------------" class="ax ay az ba bb bc bd be bf bg bh bi bj bk bl" rel="noopener nofollow">Open in app</a></span></div></div></div></div></div><a aria-label="Homepage" rel="noopener" href="https://medium.com/?source=post_page-----9d82e377d55--------------------------------"><svg viewBox="0 0 1043.63 592.71" class="bm r"><g data-name="Layer 2"><g data-name="Layer 1"><path d="M588.67 296.36c0 163.67-131.78 296.35-294.33 296.35S0 460 0 296.36 131.78 0 294.34 0s294.33 132.69 294.33 296.36M911.56 296.36c0 154.06-65.89 279-147.17 279s-147.17-124.94-147.17-279 65.88-279 147.16-279 147.17 124.9 147.17 279M1043.63 296.36c0 138-23.17 249.94-51.76 249.94s-51.75-111.91-51.75-249.94 23.17-249.94 51.75-249.94 51.76 111.9 51.76 249.94"></path></g></g></svg></a></div></div></div></div></div><div class="n p"><div class="ae af ag ah ai aj ak t"><div class="v n o am bn bo bp bq br"><div class="t n bs bn"><div class="s n t"><div class="bt bu t n bv am bw bp bq"><div class="bx by w"><a aria-label="Author Homepage" rel="noopener" href="https://medium.com/@gusiol?source=post_page-----9d82e377d55--------------------------------"><span class="at bz ca cb cc cd ce cf cg ch ci cj ck cl cm">Gustavo Simões</span></a></div><div class="bx w cn"><h4 class="at b co cp cq cd ce cf cg ch ci cj aw"><div class="n o"><span class="at b co cp cr">3 Followers</span><div class="cs ct w">·</div><div class="by w"><a class="cu cv az ba bb bc bd be bf bg cw cx bj cy cz" rel="noopener" href="https://medium.com/@gusiol/about?source=post_page-----9d82e377d55--------------------------------">About</a></div><div class="w"><button class="ax ay az ba bb bc bd be bf bg bh bi bj bk bl">Follow</button></div></div></h4></div></div></div><div class="n o da db ac g"><div class="ct dc dd n o"><div class="ao ap"><div class="n" aria-hidden="false"><button aria-label="Publication Menu" class="cu de az ba bb bc bd be bf dg bg"><div class="dh w"><svg class="de df" width="25" height="25"><path d="M5 12.5c0 .55.2 1.02.59 1.41.39.4.86.59 1.41.59.55 0 1.02-.2 1.41-.59.4-.39.59-.86.59-1.41 0-.55-.2-1.02-.59-1.41A1.93 1.93 0 0 0 7 10.5c-.55 0-1.02.2-1.41.59-.4.39-.59.86-.59 1.41zm5.62 0c0 .55.2 1.02.58 1.41.4.4.87.59 1.42.59.55 0 1.02-.2 1.41-.59.4-.39.59-.86.59-1.41 0-.55-.2-1.02-.59-1.41a1.93 1.93 0 0 0-1.41-.59c-.55 0-1.03.2-1.42.59-.39.39-.58.86-.58 1.41zm5.6 0c0 .55.2 1.02.58 1.41.4.4.87.59 1.43.59.56 0 1.03-.2 1.42-.59.39-.39.58-.86.58-1.41 0-.55-.2-1.02-.58-1.41a1.93 1.93 0 0 0-1.42-.59c-.56 0-1.04.2-1.43.59-.39.39-.58.86-.58 1.41z" fill-rule="evenodd"></path></svg></div></button></div></div><div class="di dj w"><div class="ao ap"><div class="dr" aria-hidden="false"><div class="n"><button class="cu cv az ba bb bc bd be bf bg cw cx bj cy cz"><span class="dh w"><svg width="25" height="25" viewBox="0 0 25 25" class="de"><path d="M20.07 18.93l-4.16-4.15a6 6 0 1 0-.88.88l4.15 4.16a.62.62 0 1 0 .89-.89zM6.5 11a4.75 4.75 0 1 1 9.5 0 4.75 4.75 0 0 1-9.5 0z"></path></svg></span></button><input class="ds dg dt co av du dv cr dw ab dx dy dz" placeholder="Search Gustavo Simões&#39;s stories" value=""></div></div></div></div></div><a aria-label="Homepage" rel="noopener" href="https://medium.com/?source=post_page-----9d82e377d55--------------------------------"><svg viewBox="0 0 1043.63 592.71" class="bm r"><g data-name="Layer 2"><g data-name="Layer 1"><path d="M588.67 296.36c0 163.67-131.78 296.35-294.33 296.35S0 460 0 296.36 131.78 0 294.34 0s294.33 132.69 294.33 296.36M911.56 296.36c0 154.06-65.89 279-147.17 279s-147.17-124.94-147.17-279 65.88-279 147.16-279 147.17 124.9 147.17 279M1043.63 296.36c0 138-23.17 249.94-51.76 249.94s-51.75-111.91-51.75-249.94 23.17-249.94 51.75-249.94 51.76 111.9 51.76 249.94"></path></g></g></svg></a></div></div></div></div></div></div></div><div class="w gd"><div class="qu qv t gr kl qw qx mb du qy el" aria-hidden="true"></div><div class="qz kl ra rb rc qu gr ef rd re rf qq rg rh ri qj rj rk rl rm" aria-hidden="true"><div class="rn ro n o am bn"><h2 class="at ir rp cp ck cr">Responses (1)</h2><div class="n am"><div class="w ab rq"><div class="bf w ab rr"><button class="cu cv az ba bb bc bd be bf bg cw cx bj cy cz" data-testid="close-button" aria-label="close"><svg width="25" height="25" viewBox="0 0 25 25" class="de"><path d="M18.13 6.11l-5.61 5.61-5.6-5.61-.81.8 5.61 5.61-5.61 5.61.8.8 5.61-5.6 5.61 5.6.8-.8-5.6-5.6 5.6-5.62"></path></svg></button></div></div></div></div><div class="rs tg w"><div class="rb st lm n x su sv sw"><div class="n o bn ab sx sy du sz ta"><div class="n o"><img alt="Rohit Singh Niranjan" class="w fr dc rv" src="./NestJS with MongoDB native driver _ by Gustavo Simões _ Medium_files/0_O7JrhxxQ4KkyVr1c.jpg" width="32" height="32"><div class="cs n bs x p"><h4 class="at b au av cr">Rohit Singh Niranjan</h4></div></div></div><div class="n x"><div class="tb tc" role="button"><div class="th w"><div data-gramm="false" role="textbox" data-slate-editor="true" data-slate-node="value" contenteditable="true" style="outline: none; white-space: pre-wrap; overflow-wrap: break-word;"><div data-slate-node="element"><p><span data-slate-node="text"><span data-slate-leaf="true"><span contenteditable="false" style="pointer-events: none; display: inline-block; vertical-align: text-top; width: 0px; max-width: 100%; white-space: nowrap; opacity: 0.333;">What are your thoughts?</span><span data-slate-zero-width="n" data-slate-length="0">﻿<br></span></span></span></p></div></div></div></div><div class="n td sx te du sz"><div class="tf"><button class="at b au av cr ld r le ti tj df tk bg lh li tl tm tn lm ln lo ef dr lp">Cancel</button></div><button class="at b au av to ld pz tp lf tq lg bg lh li tr ll lm ln lo ef dr lp" disabled="">Respond</button></div></div></div></div><div class="rs w"><div class="t gr"><div class="sd pk w"><div class="n am bn"><div class="n o am"><img alt="vc" class="w fr dc rv" src="./NestJS with MongoDB native driver _ by Gustavo Simões _ Medium_files/1_z1gystCCHPpR_KDmnwvvCw.jpeg" width="32" height="32"><div class="sf w"><div class="n am"><a class="cu cv az ba bb bc bd be bf bg cw cx bj cy cz" rel="noopener" href="https://medium.com/@everyonespams?source=responses-----9d82e377d55----0----------------------------"><h4 class="at b au av cr">vc</h4></a></div><a class="cu cv az ba bb bc bd be bf bg qg bj cy cz" rel="noopener nofollow" href="https://medium.com/@everyonespams/great-article-i-was-wondering-how-would-you-write-unit-test-for-this-database-module-and-service-75306c435878?source=responses-----9d82e377d55----0----------------------------"><h4 class="at b au av aw">about 2 months ago</h4></a></div></div><button class="mb lz gg cx se"><svg class="overflow-dots-filled-25px_svg__svgIcon-use" width="25" height="25"><path d="M5 12.5c0 .55.2 1.02.59 1.41.39.4.86.59 1.41.59.55 0 1.02-.2 1.41-.59.4-.39.59-.86.59-1.41 0-.55-.2-1.02-.59-1.41A1.93 1.93 0 0 0 7 10.5c-.55 0-1.02.2-1.41.59-.4.39-.59.86-.59 1.41zm5.62 0c0 .55.2 1.02.58 1.41.4.4.87.59 1.42.59.55 0 1.02-.2 1.41-.59.4-.39.59-.86.59-1.41 0-.55-.2-1.02-.59-1.41a1.93 1.93 0 0 0-1.41-.59c-.55 0-1.03.2-1.42.59-.39.39-.58.86-.58 1.41zm5.6 0c0 .55.2 1.02.58 1.41.4.4.87.59 1.43.59.56 0 1.03-.2 1.42-.59.39-.39.58-.86.58-1.41 0-.55-.2-1.02-.58-1.41a1.93 1.93 0 0 0-1.42-.59c-.56 0-1.04.2-1.43.59-.39.39-.58.86-.58 1.41z" fill-rule="evenodd"></path></svg></button></div><div class="sg w"><pre class="jx"><div class="sh w"><h4 class="at b au av cr"><div class="cp">Great article! I was wondering how would you write unit test for this database module and service.</div></h4></div></pre></div><div class="si n o am"><div class="n o"><div class="w ab lt lu lv lw lx"><div class=""><button class="be ly lz ma mb mc md qm r mf mg"><svg width="25" height="25" viewBox="0 0 25 25" aria-label="clap"><g fill-rule="evenodd"><path d="M11.74 0l.76 2.97.76-2.97zM14.81 3.78l1.84-2.56-1.42-.47zM8.38 1.22l1.84 2.56L9.8.75zM20.38 21.62a5.11 5.11 0 0 1-3.16 1.61l.49-.45c2.88-2.89 3.45-5.98 1.69-9.21l-1.1-1.94-.96-2.02c-.31-.67-.23-1.18.25-1.55a.84.84 0 0 1 .66-.16c.34.05.66.28.88.6l2.85 5.02c1.18 1.97 1.38 5.12-1.6 8.1M7.1 21.1l-5.02-5.02a1 1 0 0 1 .7-1.7 1 1 0 0 1 .72.3l2.6 2.6a.44.44 0 0 0 .63-.62L4.1 14.04l-1.75-1.75a1 1 0 1 1 1.41-1.41l4.15 4.15a.44.44 0 0 0 .63 0 .44.44 0 0 0 0-.62L4.4 10.26 3.22 9.08a1 1 0 0 1 0-1.4 1.02 1.02 0 0 1 1.41 0l1.18 1.16L9.96 13a.44.44 0 0 0 .62 0 .44.44 0 0 0 0-.63L6.43 8.22a.99.99 0 0 1-.3-.7.99.99 0 0 1 .3-.7 1 1 0 0 1 1.41 0l7 6.98a.44.44 0 0 0 .7-.5l-1.35-2.85c-.31-.68-.23-1.19.25-1.56a.85.85 0 0 1 .66-.16c.34.06.66.28.88.6L18.63 14c1.57 2.88 1.07 5.54-1.55 8.16a5.62 5.62 0 0 1-5.06 1.65 9.35 9.35 0 0 1-4.93-2.72zM11 5.98l2.56 2.56c-.5.6-.56 1.41-.15 2.28l.26.56-4.25-4.25a.98.98 0 0 1-.12-.45 1 1 0 0 1 .29-.7 1.02 1.02 0 0 1 1.41 0zm8.89 2.06c-.38-.56-.9-.92-1.49-1.01a1.74 1.74 0 0 0-1.34.33c-.38.29-.61.65-.71 1.06a2.1 2.1 0 0 0-1.1-.56 1.78 1.78 0 0 0-.99.13l-2.64-2.64a1.88 1.88 0 0 0-2.65 0 1.86 1.86 0 0 0-.48.85 1.89 1.89 0 0 0-2.67-.01 1.87 1.87 0 0 0-.5.9c-.76-.75-2-.75-2.7-.04a1.88 1.88 0 0 0 0 2.66c-.3.12-.61.29-.87.55a1.88 1.88 0 0 0 0 2.66l.62.62a1.88 1.88 0 0 0-.9 3.16l5.01 5.02c1.6 1.6 3.52 2.64 5.4 2.96a7.16 7.16 0 0 0 1.18.1c1.03 0 2-.25 2.9-.7A5.9 5.9 0 0 0 21 22.24c3.34-3.34 3.08-6.93 1.74-9.17l-2.87-5.04z"></path></g></svg></button></div></div></div><div class="sj w"></div><a class="cu cv az ba bb bc bd be bf bg cw cx bj cy cz" rel="noopener" href="https://medium.com/@everyonespams/great-article-i-was-wondering-how-would-you-write-unit-test-for-this-database-module-and-service-75306c435878?responsesOpen=true&amp;source=responses-----9d82e377d55----0----------------------------"><button class="mb lz be"><div class="sk n o am"><div class="w ab sl"><svg width="25" height="25" aria-label="responses"><path d="M19.07 21.12a6.33 6.33 0 0 1-3.53-1.1 7.8 7.8 0 0 1-.7-.52c-.77.21-1.57.32-2.38.32-4.67 0-8.46-3.5-8.46-7.8C4 7.7 7.79 4.2 12.46 4.2c4.66 0 8.46 3.5 8.46 7.8 0 2.06-.85 3.99-2.4 5.45a6.28 6.28 0 0 0 1.14 2.59c.15.21.17.48.06.7a.69.69 0 0 1-.62.38h-.03zm0-1v.5l.03-.5h-.03zm-3.92-1.64l.21.2a6.09 6.09 0 0 0 3.24 1.54 7.14 7.14 0 0 1-.83-1.84 5.15 5.15 0 0 1-.16-.75 2.4 2.4 0 0 1-.02-.29v-.23l.18-.15a6.6 6.6 0 0 0 2.3-4.96c0-3.82-3.4-6.93-7.6-6.93-4.19 0-7.6 3.11-7.6 6.93 0 3.83 3.41 6.94 7.6 6.94.83 0 1.64-.12 2.41-.35l.28-.08z" fill-rule="evenodd"></path></svg></div><div class="w ab nw sm nx sn ny so sp sq sr ss"></div></div></button></a></div></div></div></div></div></div><article><section class="ea eb ec ed t ee ef w"></section><span class="w"></span><div><div class="eg eh qn ej ek el"></div><section class="cm em en ch eo"><div class="n p"><div class="ae af ag ah ai ep ak t"><div><h1 id="486b" class="eq ck er at bz es et eu ev ew ex ey ez fa fb fc fd fe ff fg fh fi fj fk fl fm cr">NestJS with MongoDB native driver</h1><div class="fn"><div class="n bn fo fp fq"><div class="o n"><div><a rel="noopener" href="https://medium.com/@gusiol?source=post_page-----9d82e377d55--------------------------------"><img alt="Gustavo Simões" class="w fr fs ft" src="./NestJS with MongoDB native driver _ by Gustavo Simões _ Medium_files/2_ivFpNEvlDi6c8YTZf9Uo0A.jpeg" width="28" height="28"></a></div><div class="cs t n"><div class="n"><div style="flex:1"><span class="at b au av cr"><a class="" rel="noopener" href="https://medium.com/@gusiol?source=post_page-----9d82e377d55--------------------------------"><h4 class="at b au av ax">Gustavo Simões</h4></a></span></div></div><span class="at b au av aw"><a class="" rel="noopener" href="https://medium.com/@gusiol/nestjs-with-mongodb-native-driver-9d82e377d55?source=post_page-----9d82e377d55--------------------------------"><h4 class="at b au av aw"><span class="fu"></span>Jun 13<span class="fv">·</span>4 min read</h4></a></span></div></div><div class="n bv fw fx fy fz ga gb gc gd"><div class="n o"><div class="ge w"><div class="dr" aria-hidden="false"><button class="cu cv az ba bb bc bd be bf bg cw cx bj cy cz" aria-label="Share Post"><svg width="25" height="25" class="r"><g fill-rule="evenodd"><path d="M15.6 5a.42.42 0 0 0 .17-.3.42.42 0 0 0-.12-.33l-2.8-2.79a.5.5 0 0 0-.7 0l-2.8 2.8a.4.4 0 0 0-.1.32c0 .12.07.23.16.3h.02a.45.45 0 0 0 .57-.04l2-2V10c0 .28.23.5.5.5s.5-.22.5-.5V2.93l2.02 2.02c.08.07.18.12.3.13.11.01.21-.02.3-.08v.01"></path><path d="M18 7h-1.5a.5.5 0 0 0 0 1h1.6c.5 0 .9.4.9.9v10.2c0 .5-.4.9-.9.9H6.9a.9.9 0 0 1-.9-.9V8.9c0-.5.4-.9.9-.9h1.6a.5.5 0 0 0 .35-.15A.5.5 0 0 0 9 7.5a.5.5 0 0 0-.15-.35A.5.5 0 0 0 8.5 7H7a2 2 0 0 0-2 2v10c0 1.1.9 2 2 2h11a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2"></path></g></svg></button></div></div><div class="gf w"><div><div class="gg"><div><div class="dr" role="tooltip" aria-hidden="false" aria-describedby="1" aria-labelledby="1"><button class="cu cv az ba bb bc bd be bf bg cw cx bj cy cz" aria-label="Bookmark Post"><svg width="25" height="25" viewBox="0 0 25 25"><path d="M19 6a2 2 0 0 0-2-2H8a2 2 0 0 0-2 2v14.66h.01c.01.1.05.2.12.28a.5.5 0 0 0 .7.03l5.67-4.12 5.66 4.13a.5.5 0 0 0 .71-.03.5.5 0 0 0 .12-.29H19V6zm-6.84 9.97L7 19.64V6a1 1 0 0 1 1-1h9a1 1 0 0 1 1 1v13.64l-5.16-3.67a.49.49 0 0 0-.68 0z" fill-rule="evenodd"></path></svg></button></div></div></div></div></div><div class="gh w an"><div class="dr" aria-hidden="false"><div class="w da"><button class="cu cv az ba bb bc bd be bf bg cw cx bj cy cz" aria-label="More options"><svg class="r df gi" width="25" height="25"><path d="M5 12.5c0 .55.2 1.02.59 1.41.39.4.86.59 1.41.59.55 0 1.02-.2 1.41-.59.4-.39.59-.86.59-1.41 0-.55-.2-1.02-.59-1.41A1.93 1.93 0 0 0 7 10.5c-.55 0-1.02.2-1.41.59-.4.39-.59.86-.59 1.41zm5.62 0c0 .55.2 1.02.58 1.41.4.4.87.59 1.42.59.55 0 1.02-.2 1.41-.59.4-.39.59-.86.59-1.41 0-.55-.2-1.02-.59-1.41a1.93 1.93 0 0 0-1.41-.59c-.55 0-1.03.2-1.42.59-.39.39-.58.86-.58 1.41zm5.6 0c0 .55.2 1.02.58 1.41.4.4.87.59 1.43.59.56 0 1.03-.2 1.42-.59.39-.39.58-.86.58-1.41 0-.55-.2-1.02-.58-1.41a1.93 1.93 0 0 0-1.42-.59c-.56 0-1.04.2-1.43.59-.39.39-.58.86-.58 1.41z" fill-rule="evenodd"></path></svg></button></div></div></div></div></div></div></div></div><figure class="gk gl ec ed paragraph-image"><div class="gm gn ab go t"><div class="ec ed gj"><div class="gu w ab gv"><div class="gw gx w"><div class="du gp eg gq eh gr t dp gs gt"><img alt="Image for post" class="eg gq eh gr t gy gz ar qt" src="./NestJS with MongoDB native driver _ by Gustavo Simões _ Medium_files/1_jiqgT2HxAe1c_48yEdcZwQ.png" width="1765" height="942"></div><img alt="Image for post" class="qq qr eg gq eh gr t c" width="1765" height="942" src="./NestJS with MongoDB native driver _ by Gustavo Simões _ Medium_files/1_jiqgT2HxAe1c_48yEdcZwQ(1).png" srcset="https://miro.medium.com/max/276/1*jiqgT2HxAe1c_48yEdcZwQ.png 276w, https://miro.medium.com/max/552/1*jiqgT2HxAe1c_48yEdcZwQ.png 552w, https://miro.medium.com/max/640/1*jiqgT2HxAe1c_48yEdcZwQ.png 640w, https://miro.medium.com/max/700/1*jiqgT2HxAe1c_48yEdcZwQ.png 700w" sizes="700px"><noscript><img alt="Image for post" class="eg gq eh gr t" src="https://miro.medium.com/max/3530/1*jiqgT2HxAe1c_48yEdcZwQ.png" width="1765" height="942" srcSet="https://miro.medium.com/max/552/1*jiqgT2HxAe1c_48yEdcZwQ.png 276w, https://miro.medium.com/max/1104/1*jiqgT2HxAe1c_48yEdcZwQ.png 552w, https://miro.medium.com/max/1280/1*jiqgT2HxAe1c_48yEdcZwQ.png 640w, https://miro.medium.com/max/1400/1*jiqgT2HxAe1c_48yEdcZwQ.png 700w" sizes="700px"/></noscript></div></div></div></div></figure><p id="1d50" class="hb hc er hd b he hf hg hh hi hj hk hl hm hn ho hp hq hr hs ht hu hv hw hx hy cm cr" data-selectable-paragraph="">Let’s build a application with NestJS and MongoDB.</p><ol class=""><li id="ee7b" class="hb hc er hd b he hf hg hh hi hj hk hl hm hn ho hp hq hr hs ht hu hv hw hx hy hz ia ib cr" data-selectable-paragraph="">Install NestJS</li><li id="76f3" class="hb hc er hd b he ic hg hh hi id hk hl hm ie ho hp hq if hs ht hu ig hw hx hy hz ia ib cr" data-selectable-paragraph="">Install <a href="https://mongoosejs.com/" class="cu ih" rel="noopener nofollow">Mongoose</a></li></ol><figure class="ij ik il im in gl ec ed paragraph-image"><div class="ec ed ii"><div class="gu w ab gv"><div class="io gx w"><div class="du gp eg gq eh gr t dp gs gt"><img alt="Image for post" class="eg gq eh gr t gy gz ar qt" src="./NestJS with MongoDB native driver _ by Gustavo Simões _ Medium_files/1_CTi-n23g998yqJFNrqBhaw.jpeg" width="550" height="301"></div><img alt="Image for post" class="qq qr eg gq eh gr t c" width="550" height="301" src="./NestJS with MongoDB native driver _ by Gustavo Simões _ Medium_files/1_CTi-n23g998yqJFNrqBhaw(1).jpeg" srcset="https://miro.medium.com/max/276/1*CTi-n23g998yqJFNrqBhaw.jpeg 276w, https://miro.medium.com/max/550/1*CTi-n23g998yqJFNrqBhaw.jpeg 550w" sizes="550px"><noscript><img alt="Image for post" class="eg gq eh gr t" src="https://miro.medium.com/max/1100/1*CTi-n23g998yqJFNrqBhaw.jpeg" width="550" height="301" srcSet="https://miro.medium.com/max/552/1*CTi-n23g998yqJFNrqBhaw.jpeg 276w, https://miro.medium.com/max/1100/1*CTi-n23g998yqJFNrqBhaw.jpeg 550w" sizes="550px"/></noscript></div></div></div></figure><p id="386a" class="hb hc er hd b he hf hg hh hi hj hk hl hm hn ho hp hq hr hs ht hu hv hw hx hy cm cr" data-selectable-paragraph="">Do I really need Mongoose? I see a lot of articles, videos and courses about NodeJS / MongoDB stack applications that apply Mongoose right from the start, sometimes without being clear about the reasons to do so.</p><h1 id="b887" class="ip iq er at ir is it hg iu iv iw hk ix iy iz ja jb jc jd je jf jg jh ji jj jk cr" data-selectable-paragraph="">Introduction</h1><p id="9144" class="hb hc er hd b he jl hg hh hi jm hk hl hm jn ho hp hq jo hs ht hu jp hw hx hy cm cr" data-selectable-paragraph="">Coming from a SQL world, using Mongoose can feel more n<span id="rmm"><span id="rmm"><span id="rmm"><span id="rmm"><span id="rmm"><span id="rmm">a</span></span></span></span></span></span>tural as it uses schemas that define a structure for the data. But being schemaless is one of NoSQL main advantages. That is particularly interesting when you don’t know before hand the kind of data you will receive. Also, in the early stages of web development, the business rules may suffer many changes, so having a schemaless database can be an advantage. Mongoose applies the schema in the application layer, although the database itself remains schemaless, its behavior considering the application, isn’t.</p><p id="fe4f" class="hb hc er hd b he hf hg hh hi hj hk hl hm hn ho hp hq hr hs ht hu hv hw hx hy cm cr" data-selectable-paragraph="">It is true that most of the material I referenced earlier had a well defined data structure so using schemas is fine. But it is also true that those applications could easily be build with N<a href="https://mongodb.github.io/node-mongodb-native/" class="cu ih" rel="noopener nofollow">odeJS native MongoDB driver</a>. And if you still feel the need for using schemas, the native driver also provides <a href="https://docs.mongodb.com/manual/core/schema-validation/#json-schema" class="cu ih" rel="noopener nofollow">MongoDB JSON Schema</a>, a flexible schema implementation since version 3.6 (2017).</p><p id="4a8d" class="hb hc er hd b he hf hg hh hi hj hk hl hm hn ho hp hq hr hs ht hu hv hw hx hy cm cr" data-selectable-paragraph="">One thing I do not like is that as Mongoose adds an abstraction layer, the developer tends not to know how to use MongoDB native syntax which I believe is important. I do like Mongoose, it certainly is a well written and powerful tool, it provides a fast way to build applications in NodeJS / MongoDB stack, it offers others functionalities apart from schemas, it does facilitates some operations and helped me when starting in NoSQL world. But part of the reason for this last one is that I did not saw a lot of material about using this stack with the native driver as I did with Mongoose. That is what motivated me to write this article.</p><p id="d795" class="hb hc er hd b he hf hg hh hi hj hk hl hm hn ho hp hq hr hs ht hu hv hw hx hy cm cr" data-selectable-paragraph="">My goal is to provide the option of using the native driver which can already offer everything you need in your application with better performance, less dependencies and also a simple and nice coding experience. I’m using NestJS as its official documentation only covers integration with Mongoose and <a href="https://typeorm.io/" class="cu ih" rel="noopener nofollow">TypeORM</a>.</p><h1 id="5724" class="ip iq er at ir is it hg iu iv iw hk ix iy iz ja jb jc jd je jf jg jh ji jj jk cr" data-selectable-paragraph="">Implementation</h1><p id="5b30" class="hb hc er hd b he jl hg hh hi jm hk hl hm jn ho hp hq jo hs ht hu jp hw hx hy cm cr" data-selectable-paragraph=""><strong class="hd bz">1. Install NodeJS native MongoDB driver</strong></p><pre class="ij ik il im in jq jr js"><span id="9fa4" class="cr jt iq er ju b co jv jw w jx" data-selectable-paragraph="">npm install mongodb --save</span></pre><p id="edf3" class="hb hc er hd b he hf hg hh hi hj hk hl hm hn ho hp hq hr hs ht hu hv hw hx hy cm cr" data-selectable-paragraph=""><strong class="hd bz">2. Connect to the database</strong><br>Here I created a database module with a provider <code class="gv jy jz ka ju b">DATABASE_CONNECTION</code>. First I make a instance of <code class="gv jy jz ka ju b">MongoClient</code> that connect to the cluster using the <code class="gv jy jz ka ju b">connect</code> method which receives as parameters a MongoDB connection string and a optional options object. Then I return a database instance <code class="gv jy jz ka ju b">db</code> to a particular database name from this provider.</p><figure class="ij ik il im in gl"><div class="gu w ab"><div class="tu gx w"><iframe src="./NestJS with MongoDB native driver _ by Gustavo Simões _ Medium_files/76a90b8c865f2ebe5817c0bd5a38470f.html" allowfullscreen="" frameborder="0" height="545" width="680" title="" class="eg gq eh gr t" scrolling="auto"></iframe></div></div><figcaption class="kc kd ee ec ed ke kf at b au av aw"><code class="gv jy jz ka ju b">database.module.ts</code></figcaption></figure><p id="e227" class="hb hc er hd b he hf hg hh hi hj hk hl hm hn ho hp hq hr hs ht hu hv hw hx hy cm cr" data-selectable-paragraph=""><strong class="hd bz">3. Import the Database module from other modules<br></strong>Here I’m importing the database module from a users module.</p><figure class="ij ik il im in gl"><div class="gu w ab"><div class="tt gx w"><iframe src="./NestJS with MongoDB native driver _ by Gustavo Simões _ Medium_files/a68a3deb5080cc497e81875f641092a3.html" allowfullscreen="" frameborder="0" height="281" width="680" title="" class="eg gq eh gr t" scrolling="auto"></iframe></div></div><figcaption class="kc kd ee ec ed ke kf at b au av aw">users.module.ts</figcaption></figure><p id="9cbd" class="hb hc er hd b he hf hg hh hi hj hk hl hm hn ho hp hq hr hs ht hu hv hw hx hy cm cr" data-selectable-paragraph=""><strong class="hd bz">4. Use the connection in services across the application<br></strong>Now you can inject the database instance to your services and use native MongoDB queries to interact with the data. Here is an example of a basic users CRUD implementation.</p><figure class="ij ik il im in gl"><div class="gu w ab"><div class="tv gx w"><iframe src="./NestJS with MongoDB native driver _ by Gustavo Simões _ Medium_files/f74f85339c421d2b9d228ed4ed05c5d6.html" allowfullscreen="" frameborder="0" height="1535" width="680" title="" class="eg gq eh gr t" scrolling="auto"></iframe></div></div><figcaption class="kc kd ee ec ed ke kf at b au av aw">users.service.ts</figcaption></figure><p id="aa57" class="hb hc er hd b he hf hg hh hi hj hk hl hm hn ho hp hq hr hs ht hu hv hw hx hy cm cr" data-selectable-paragraph="">As you can see, the queries are pretty intuitive and similar to Mongoose methods. Here are some differences.</p><ol class=""><li id="0784" class="hb hc er hd b he hf hg hh hi hj hk hl hm hn ho hp hq hr hs ht hu hv hw hx hy hz ia ib cr" data-selectable-paragraph="">You need to specify the collection name were the query is to run;</li><li id="eb5f" class="hb hc er hd b he ic hg hh hi id hk hl hm ie ho hp hq if hs ht hu ig hw hx hy hz ia ib cr" data-selectable-paragraph="">MongoDB by default stores each document with a <a href="https://docs.mongodb.com/manual/reference/bson-types/#objectid" class="cu ih" rel="noopener nofollow">ObjectId BSON type</a> primary key named <code class="gv jy jz ka ju b">_id</code>. When your query uses this key you need to convert the string value to a <code class="gv jy jz ka ju b">ObjectId</code> type;</li><li id="a018" class="hb hc er hd b he ic hg hh hi id hk hl hm ie ho hp hq if hs ht hu ig hw hx hy hz ia ib cr" data-selectable-paragraph="">If the <code class="gv jy jz ka ju b">_id</code> comes in the request, you need to check if is a valid <code class="gv jy jz ka ju b">ObjectId</code>;</li><li id="2873" class="hb hc er hd b he ic hg hh hi id hk hl hm ie ho hp hq if hs ht hu ig hw hx hy hz ia ib cr" data-selectable-paragraph="">Update queries do not return the updated document. If you need to access it before the query is executed you will have to do a subsequent <code class="gv jy jz ka ju b">find</code>;</li><li id="e770" class="hb hc er hd b he ic hg hh hi id hk hl hm ie ho hp hq if hs ht hu ig hw hx hy hz ia ib cr" data-selectable-paragraph="">You need to manually throw exceptions based on the return from the query execution;</li></ol><h1 id="2a33" class="ip iq er at ir is it hg iu iv iw hk ix iy iz ja jb jc jd je jf jg jh ji jj jk cr" data-selectable-paragraph="">Validation</h1><p id="253a" class="hb hc er hd b he jl hg hh hi jm hk hl hm jn ho hp hq jo hs ht hu jp hw hx hy cm cr" data-selectable-paragraph="">As in any API, the requests need to be validated. When the document data comes from the request and the request is validated before processing, you should not need to re-validate it in the schema. In NestJS, you can validate your request data with <a href="https://docs.nestjs.com/techniques/validation#validation" class="cu ih" rel="noopener nofollow">class-validator</a> as follows.</p><figure class="ij ik il im in gl"><div class="gu w ab"><div class="vl gx w"><iframe src="./NestJS with MongoDB native driver _ by Gustavo Simões _ Medium_files/e0f5b935afe0ed12797ff7e1aea06d63.html" allowfullscreen="" frameborder="0" height="347" width="680" title="" class="eg gq eh gr t" scrolling="auto"></iframe></div></div><figcaption class="kc kd ee ec ed ke kf at b au av aw">createUser.dto.ts</figcaption></figure><p id="aa30" class="hb hc er hd b he hf hg hh hi hj hk hl hm hn ho hp hq hr hs ht hu hv hw hx hy cm cr" data-selectable-paragraph="">When the document data or part of if comes from external services you can validate the response before executing database queries. If the request or external response structure is not defined you can use a generic type <code class="gv jy jz ka ju b">any</code>and insert the data as it in a schemaless database. Mongoose also can store generic types with <a href="https://mongoosejs.com/docs/schematypes.html#mixed" class="cu ih" rel="noopener nofollow">mixed type</a> but generally this is used when your document have defined fields and one or more generic. If all document is generic, as is in standard NoSQL (schemaless), there is no point of using Mongoose, at least in that collection.</p><h1 id="1360" class="ip iq er at ir is it hg iu iv iw hk ix iy iz ja jb jc jd je jf jg jh ji jj jk cr" data-selectable-paragraph="">Indexes</h1><p id="6d3a" class="hb hc er hd b he jl hg hh hi jm hk hl hm jn ho hp hq jo hs ht hu jp hw hx hy cm cr" data-selectable-paragraph="">You can create indexes to your collection using the <code class="gv jy jz ka ju b">createIndex</code> method. Acording to <a href="https://docs.mongodb.com/manual/indexes/#create-an-index" class="cu ih" rel="noopener nofollow">MongoDB documentation</a>:</p><blockquote class="kg kh ki"><p id="0d1b" class="hb hc kj hd b he hf hg hh hi hj hk hl hm hn ho hp hq hr hs ht hu hv hw hx hy cm cr" data-selectable-paragraph="">The <code class="gv jy jz ka ju b"><em class="er">db.collection.createIndex</em></code>method only creates an index if an index of the same specification does not already exist.</p></blockquote><p id="ce87" class="hb hc er hd b he hf hg hh hi hj hk hl hm hn ho hp hq hr hs ht hu hv hw hx hy cm cr" data-selectable-paragraph="">So you don’t need to worry about executing this method multiple times. Here I’m creating a <code class="gv jy jz ka ju b">unique</code> index on the email field with <code class="gv jy jz ka ju b"><a href="https://docs.mongodb.com/manual/indexes/#sparse-indexes" class="cu ih" rel="noopener nofollow">sparse</a></code> to skip documents that <em class="kj">do not</em> have the indexed field when the connection is set.</p><figure class="ij ik il im in gl"><div class="gu w ab"><div class="kb gx w"></div></div><figcaption class="kc kd ee ec ed ke kf at b au av aw">database-module.ts with indexes</figcaption></figure><h1 id="5b88" class="ip iq er at ir is it hg iu iv iw hk ix iy iz ja jb jc jd je jf jg jh ji jj jk cr" data-selectable-paragraph="">Conclusion</h1><p id="82d7" class="hb hc er hd b he jl hg hh hi jm hk hl hm jn ho hp hq jo hs ht hu jp hw hx hy cm cr" data-selectable-paragraph="">Using NodeJS native driver is easy. Some parts are similar to Mongoose’s implementation with the advantage of using native MongoDB syntax, which you can directly use on MongoDB shell or clients and have a better performance. Also you use less dependencies (3) compared to Mongoose (11 including the native driver) so the application size is smaller and you don’t have to worry about catching a bug in any of those dependencies or theirs dependencies. Here is a repository with the complete application code <a href="https://github.com/guizoxxv/nestjs-native-mongodb-driver-test" class="cu ih" rel="noopener nofollow">https://github.com/guizoxxv/nestjs-native-mongodb-driver-test</a>.</p></div></div></section></div></article><div class="du el kl kk t qp kq kt" data-test-id="post-sidebar"><div class="n p"><div class="ae af ag ah ai aj ak t"><div class="ku n x"><div class="el"><div><div class="kv u w"><p class="at b kw kx ky aw kz">Written by</p><div class="la lb w"><a class="cu cv az ba bb bc bd be bf bg cw cx bj cy cz" rel="noopener" href="https://medium.com/@gusiol?source=post_sidebar--------------------------post_sidebar-----------"><h2 class="at ir co av ck cr cm">Gustavo Simões</h2></a></div><div class="lc w"><button class="at b au av ax ld le ay lf bh bi lg bg lh li lj lk ll lm ln lo ef dr lp">Follow</button></div></div><div class="lq lr ls n"><div class="n o"><div class="w ab lt lu lv lw lx"><div class=""><button class="be ly lz ma mb mc md me r mf mg"><svg width="29" height="29" aria-label="clap"><g fill-rule="evenodd"><path d="M13.74 1l.76 2.97.76-2.97zM16.82 4.78l1.84-2.56-1.43-.47zM10.38 2.22l1.84 2.56-.41-3.03zM22.38 22.62a5.11 5.11 0 0 1-3.16 1.61l.49-.45c2.88-2.89 3.45-5.98 1.69-9.21l-1.1-1.94-.96-2.02c-.31-.67-.23-1.18.25-1.55a.84.84 0 0 1 .66-.16c.34.05.66.28.88.6l2.85 5.02c1.18 1.97 1.38 5.12-1.6 8.1M9.1 22.1l-5.02-5.02a1 1 0 0 1 .7-1.7 1 1 0 0 1 .72.3l2.6 2.6a.44.44 0 0 0 .63-.62L6.1 15.04l-1.75-1.75a1 1 0 1 1 1.41-1.41l4.15 4.15a.44.44 0 0 0 .63 0 .44.44 0 0 0 0-.62L6.4 11.26l-1.18-1.18a1 1 0 0 1 0-1.4 1.02 1.02 0 0 1 1.41 0l1.18 1.16L11.96 14a.44.44 0 0 0 .62 0 .44.44 0 0 0 0-.63L8.43 9.22a.99.99 0 0 1-.3-.7.99.99 0 0 1 .3-.7 1 1 0 0 1 1.41 0l7 6.98a.44.44 0 0 0 .7-.5l-1.35-2.85c-.31-.68-.23-1.19.25-1.56a.85.85 0 0 1 .66-.16c.34.06.66.28.88.6L20.63 15c1.57 2.88 1.07 5.54-1.55 8.16a5.62 5.62 0 0 1-5.06 1.65 9.35 9.35 0 0 1-4.93-2.72zM13 6.98l2.56 2.56c-.5.6-.56 1.41-.15 2.28l.26.56-4.25-4.25a.98.98 0 0 1-.12-.45 1 1 0 0 1 .29-.7 1.02 1.02 0 0 1 1.41 0zm8.89 2.06c-.38-.56-.9-.92-1.49-1.01a1.74 1.74 0 0 0-1.34.33c-.38.29-.61.65-.71 1.06a2.1 2.1 0 0 0-1.1-.56 1.78 1.78 0 0 0-.99.13l-2.64-2.64a1.88 1.88 0 0 0-2.65 0 1.86 1.86 0 0 0-.48.85 1.89 1.89 0 0 0-2.67-.01 1.87 1.87 0 0 0-.5.9c-.76-.75-2-.75-2.7-.04a1.88 1.88 0 0 0 0 2.66c-.3.12-.61.29-.87.55a1.88 1.88 0 0 0 0 2.66l.62.62a1.88 1.88 0 0 0-.9 3.16l5.01 5.02c1.6 1.6 3.52 2.64 5.4 2.96a7.16 7.16 0 0 0 1.18.1c1.03 0 2-.25 2.9-.7A5.9 5.9 0 0 0 23 23.24c3.34-3.34 3.08-6.93 1.74-9.17l-2.87-5.04z"></path></g></svg></button></div></div><div class="w mh mi mj mk ml mm mn"><div class="mo"><h4 class="at b au av aw"><button class="cu cv az ba bb bc bd be bf bg cw cx bj cy cz">14 </button></h4></div></div></div></div><div class="lr w"><button class="mb lz be"><div class="mr n o am"><svg width="25" height="25" class="r" aria-label="responses"><path d="M19.07 21.12a6.33 6.33 0 0 1-3.53-1.1 7.8 7.8 0 0 1-.7-.52c-.77.21-1.57.32-2.38.32-4.67 0-8.46-3.5-8.46-7.8C4 7.7 7.79 4.2 12.46 4.2c4.66 0 8.46 3.5 8.46 7.8 0 2.06-.85 3.99-2.4 5.45a6.28 6.28 0 0 0 1.14 2.59c.15.21.17.48.06.7a.69.69 0 0 1-.62.38h-.03zm0-1v.5l.03-.5h-.03zm-3.92-1.64l.21.2a6.09 6.09 0 0 0 3.24 1.54 7.14 7.14 0 0 1-.83-1.84 5.15 5.15 0 0 1-.16-.75 2.4 2.4 0 0 1-.02-.29v-.23l.18-.15a6.6 6.6 0 0 0 2.3-4.96c0-3.82-3.4-6.93-7.6-6.93-4.19 0-7.6 3.11-7.6 6.93 0 3.83 3.41 6.94 7.6 6.94.83 0 1.64-.12 2.41-.35l.28-.08z" fill-rule="evenodd"></path></svg><div class="w ab ms mt mu mv mw mx my mz"><h4 class="at b au av aw">1<!-- --> </h4></div></div></button></div><div><div class="gg"><div><div class="dr" role="tooltip" aria-hidden="false" aria-describedby="2" aria-labelledby="2"><button class="cu cv az ba bb bc bd be bf bg cw cx bj cy cz" aria-label="Bookmark Post"><svg width="25" height="25" viewBox="0 0 25 25"><path d="M19 6a2 2 0 0 0-2-2H8a2 2 0 0 0-2 2v14.66h.01c.01.1.05.2.12.28a.5.5 0 0 0 .7.03l5.67-4.12 5.66 4.13a.5.5 0 0 0 .71-.03.5.5 0 0 0 .12-.29H19V6zm-6.84 9.97L7 19.64V6a1 1 0 0 1 1-1h9a1 1 0 0 1 1 1v13.64l-5.16-3.67a.49.49 0 0 0-.68 0z" fill-rule="evenodd"></path></svg></button></div></div></div></div></div></div></div></div></div></div><div class="du el kk kl km kn ko kp kq kr"></div><div><div class="bx gl n x p"><div class="n p"><div class="ae af ag ah ai ep ak t"><div class="n bw"></div><div class="n o bw"></div><div class="na nb w"><div class="nb n bn gd"><div class="n am"><div class="nc w"><span class="w nd ne nf e d"><div class="n o"><div class="w ab lt lu lv lw lx"><div class=""><div><div class="dr" role="tooltip" aria-hidden="false" aria-describedby="3" aria-labelledby="3"><button class="be ly lz ma mb mc md me r mf mg"><svg width="25" height="25" viewBox="0 0 25 25" aria-label="clap"><g fill-rule="evenodd"><path d="M11.74 0l.76 2.97.76-2.97zM14.81 3.78l1.84-2.56-1.42-.47zM8.38 1.22l1.84 2.56L9.8.75zM20.38 21.62a5.11 5.11 0 0 1-3.16 1.61l.49-.45c2.88-2.89 3.45-5.98 1.69-9.21l-1.1-1.94-.96-2.02c-.31-.67-.23-1.18.25-1.55a.84.84 0 0 1 .66-.16c.34.05.66.28.88.6l2.85 5.02c1.18 1.97 1.38 5.12-1.6 8.1M7.1 21.1l-5.02-5.02a1 1 0 0 1 .7-1.7 1 1 0 0 1 .72.3l2.6 2.6a.44.44 0 0 0 .63-.62L4.1 14.04l-1.75-1.75a1 1 0 1 1 1.41-1.41l4.15 4.15a.44.44 0 0 0 .63 0 .44.44 0 0 0 0-.62L4.4 10.26 3.22 9.08a1 1 0 0 1 0-1.4 1.02 1.02 0 0 1 1.41 0l1.18 1.16L9.96 13a.44.44 0 0 0 .62 0 .44.44 0 0 0 0-.63L6.43 8.22a.99.99 0 0 1-.3-.7.99.99 0 0 1 .3-.7 1 1 0 0 1 1.41 0l7 6.98a.44.44 0 0 0 .7-.5l-1.35-2.85c-.31-.68-.23-1.19.25-1.56a.85.85 0 0 1 .66-.16c.34.06.66.28.88.6L18.63 14c1.57 2.88 1.07 5.54-1.55 8.16a5.62 5.62 0 0 1-5.06 1.65 9.35 9.35 0 0 1-4.93-2.72zM11 5.98l2.56 2.56c-.5.6-.56 1.41-.15 2.28l.26.56-4.25-4.25a.98.98 0 0 1-.12-.45 1 1 0 0 1 .29-.7 1.02 1.02 0 0 1 1.41 0zm8.89 2.06c-.38-.56-.9-.92-1.49-1.01a1.74 1.74 0 0 0-1.34.33c-.38.29-.61.65-.71 1.06a2.1 2.1 0 0 0-1.1-.56 1.78 1.78 0 0 0-.99.13l-2.64-2.64a1.88 1.88 0 0 0-2.65 0 1.86 1.86 0 0 0-.48.85 1.89 1.89 0 0 0-2.67-.01 1.87 1.87 0 0 0-.5.9c-.76-.75-2-.75-2.7-.04a1.88 1.88 0 0 0 0 2.66c-.3.12-.61.29-.87.55a1.88 1.88 0 0 0 0 2.66l.62.62a1.88 1.88 0 0 0-.9 3.16l5.01 5.02c1.6 1.6 3.52 2.64 5.4 2.96a7.16 7.16 0 0 0 1.18.1c1.03 0 2-.25 2.9-.7A5.9 5.9 0 0 0 21 22.24c3.34-3.34 3.08-6.93 1.74-9.17l-2.87-5.04z"></path></g></svg></button></div></div></div></div><div class="w mh mi mj mk ml mm mn"><div class="ab ng mo"><h4 class="at b au av cr"><button class="cu cv az ba bb bc bd be bf bg cw cx bj cy cz">14<span class="w h g f nh ni">&nbsp;</span></button><span class="w h g f nh ni"></span></h4></div></div></div></span><span class="w h g f nh ni"><div class="n bs"><div class="w ab lt lu"><div class=""><div><div class="dr" role="tooltip" aria-hidden="false" aria-describedby="4" aria-labelledby="4"><button class="be ly lz ma mb mc md me r mf mg"><svg width="33" height="33" viewBox="0 0 33 33" aria-label="clap"><path d="M28.86 17.34l-3.64-6.4c-.3-.43-.71-.73-1.16-.8a1.12 1.12 0 0 0-.9.21c-.62.5-.73 1.18-.32 2.06l1.22 2.6 1.4 2.45c2.23 4.09 1.51 8-2.15 11.66a9.6 9.6 0 0 1-.8.71 6.53 6.53 0 0 0 4.3-2.1c3.82-3.82 3.57-7.87 2.05-10.39zm-6.25 11.08c3.35-3.35 4-6.78 1.98-10.47L21.2 12c-.3-.43-.71-.72-1.16-.8a1.12 1.12 0 0 0-.9.22c-.62.49-.74 1.18-.32 2.06l1.72 3.63a.5.5 0 0 1-.81.57l-8.91-8.9a1.33 1.33 0 0 0-1.89 1.88l5.3 5.3a.5.5 0 0 1-.71.7l-5.3-5.3-1.49-1.49c-.5-.5-1.38-.5-1.88 0a1.34 1.34 0 0 0 0 1.89l1.49 1.5 5.3 5.28a.5.5 0 0 1-.36.86.5.5 0 0 1-.36-.15l-5.29-5.29a1.34 1.34 0 0 0-1.88 0 1.34 1.34 0 0 0 0 1.89l2.23 2.23L9.3 21.4a.5.5 0 0 1-.36.85.5.5 0 0 1-.35-.14l-3.32-3.33a1.33 1.33 0 0 0-1.89 0 1.32 1.32 0 0 0-.39.95c0 .35.14.69.4.94l6.39 6.4c3.53 3.53 8.86 5.3 12.82 1.35zM12.73 9.26l5.68 5.68-.49-1.04c-.52-1.1-.43-2.13.22-2.89l-3.3-3.3a1.34 1.34 0 0 0-1.88 0 1.33 1.33 0 0 0-.4.94c0 .22.07.42.17.61zm14.79 19.18a7.46 7.46 0 0 1-6.41 2.31 7.92 7.92 0 0 1-3.67.9c-3.05 0-6.12-1.63-8.36-3.88l-6.4-6.4A2.31 2.31 0 0 1 2 19.72a2.33 2.33 0 0 1 1.92-2.3l-.87-.87a2.34 2.34 0 0 1 0-3.3 2.33 2.33 0 0 1 1.24-.64l-.14-.14a2.34 2.34 0 0 1 0-3.3 2.39 2.39 0 0 1 3.3 0l.14.14a2.33 2.33 0 0 1 3.95-1.24l.09.09c.09-.42.29-.83.62-1.16a2.34 2.34 0 0 1 3.3 0l3.38 3.39a2.17 2.17 0 0 1 1.27-.17c.54.08 1.03.35 1.45.76.1-.55.41-1.03.9-1.42a2.12 2.12 0 0 1 1.67-.4 2.8 2.8 0 0 1 1.85 1.25l3.65 6.43c1.7 2.83 2.03 7.37-2.2 11.6zM13.22.48l-1.92.89 2.37 2.83-.45-3.72zm8.48.88L19.78.5l-.44 3.7 2.36-2.84zM16.5 3.3L15.48 0h2.04L16.5 3.3z" fill-rule="evenodd"></path></svg></button></div></div></div></div><div class="w mh mi mj mk nj nk nl nm nn no"><div class="ab ng mo"><h4 class="at b au av cr"><button class="cu cv az ba bb bc bd be bf bg cw cx bj cy cz">14<span class="w h g f nh ni">&nbsp;</span></button><span class="w h g f nh ni"></span></h4></div></div></div></span></div><div class="w np nq nr ns nt"></div><button class="mb lz be"><div class="mr n o am"><div><div class="dr" role="tooltip" aria-hidden="false" aria-describedby="5" aria-labelledby="5"><span class="nu w h g f nh ni"><svg width="33" height="33" viewBox="0 0 33 33" fill="none" class="r" aria-label="responses"><path clip-rule="evenodd" d="M24.28 25.5l.32-.29c2.11-1.94 3.4-4.61 3.4-7.56C28 11.83 22.92 7 16.5 7S5 11.83 5 17.65s5.08 10.66 11.5 10.66c1.22 0 2.4-.18 3.5-.5l.5-.15.41.33a8.86 8.86 0 0 0 4.68 2.1 7.34 7.34 0 0 1-1.3-4.15v-.43zm1 .45c0 1.5.46 2.62 1.69 4.44.22.32.01.75-.38.75a9.69 9.69 0 0 1-6.31-2.37c-1.2.35-2.46.54-3.78.54C9.6 29.3 4 24.09 4 17.65 4 11.22 9.6 6 16.5 6S29 11.22 29 17.65c0 3.25-1.42 6.18-3.72 8.3z"></path></svg></span><span class="nv w nd ne nf e d"><svg width="25" height="25" class="r" aria-label="responses"><path d="M19.07 21.12a6.33 6.33 0 0 1-3.53-1.1 7.8 7.8 0 0 1-.7-.52c-.77.21-1.57.32-2.38.32-4.67 0-8.46-3.5-8.46-7.8C4 7.7 7.79 4.2 12.46 4.2c4.66 0 8.46 3.5 8.46 7.8 0 2.06-.85 3.99-2.4 5.45a6.28 6.28 0 0 0 1.14 2.59c.15.21.17.48.06.7a.69.69 0 0 1-.62.38h-.03zm0-1v.5l.03-.5h-.03zm-3.92-1.64l.21.2a6.09 6.09 0 0 0 3.24 1.54 7.14 7.14 0 0 1-.83-1.84 5.15 5.15 0 0 1-.16-.75 2.4 2.4 0 0 1-.02-.29v-.23l.18-.15a6.6 6.6 0 0 0 2.3-4.96c0-3.82-3.4-6.93-7.6-6.93-4.19 0-7.6 3.11-7.6 6.93 0 3.83 3.41 6.94 7.6 6.94.83 0 1.64-.12 2.41-.35l.28-.08z" fill-rule="evenodd"></path></svg></span></div></div><div class="w ab nw mt nx mv ny mx nz oa ob oc"><h4 class="at b au av cr">1<!-- --> </h4></div></div></button></div><div class="n o"><div class="ge w"><div class="dr" aria-hidden="false"><button class="cu cv az ba bb bc bd be bf bg cw cx bj cy cz" aria-label="Share Post"><svg width="25" height="25" class="r"><g fill-rule="evenodd"><path d="M15.6 5a.42.42 0 0 0 .17-.3.42.42 0 0 0-.12-.33l-2.8-2.79a.5.5 0 0 0-.7 0l-2.8 2.8a.4.4 0 0 0-.1.32c0 .12.07.23.16.3h.02a.45.45 0 0 0 .57-.04l2-2V10c0 .28.23.5.5.5s.5-.22.5-.5V2.93l2.02 2.02c.08.07.18.12.3.13.11.01.21-.02.3-.08v.01"></path><path d="M18 7h-1.5a.5.5 0 0 0 0 1h1.6c.5 0 .9.4.9.9v10.2c0 .5-.4.9-.9.9H6.9a.9.9 0 0 1-.9-.9V8.9c0-.5.4-.9.9-.9h1.6a.5.5 0 0 0 .35-.15A.5.5 0 0 0 9 7.5a.5.5 0 0 0-.15-.35A.5.5 0 0 0 8.5 7H7a2 2 0 0 0-2 2v10c0 1.1.9 2 2 2h11a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2"></path></g></svg></button></div></div><div class="od w da"><div><div class="gg"><div><div class="dr" role="tooltip" aria-hidden="false" aria-describedby="6" aria-labelledby="6"><button class="cu cv az ba bb bc bd be bf bg cw cx bj cy cz" aria-label="Bookmark Post"><svg width="25" height="25" viewBox="0 0 25 25"><path d="M19 6a2 2 0 0 0-2-2H8a2 2 0 0 0-2 2v14.66h.01c.01.1.05.2.12.28a.5.5 0 0 0 .7.03l5.67-4.12 5.66 4.13a.5.5 0 0 0 .71-.03.5.5 0 0 0 .12-.29H19V6zm-6.84 9.97L7 19.64V6a1 1 0 0 1 1-1h9a1 1 0 0 1 1 1v13.64l-5.16-3.67a.49.49 0 0 0-.68 0z" fill-rule="evenodd"></path></svg></button></div></div></div></div></div><div class="dr" aria-hidden="false"><div class="w da"><button class="cu cv az ba bb bc bd be bf bg cw cx bj cy cz" aria-label="More options"><svg class="r df gi" width="25" height="25"><path d="M5 12.5c0 .55.2 1.02.59 1.41.39.4.86.59 1.41.59.55 0 1.02-.2 1.41-.59.4-.39.59-.86.59-1.41 0-.55-.2-1.02-.59-1.41A1.93 1.93 0 0 0 7 10.5c-.55 0-1.02.2-1.41.59-.4.39-.59.86-.59 1.41zm5.62 0c0 .55.2 1.02.58 1.41.4.4.87.59 1.42.59.55 0 1.02-.2 1.41-.59.4-.39.59-.86.59-1.41 0-.55-.2-1.02-.59-1.41a1.93 1.93 0 0 0-1.41-.59c-.55 0-1.03.2-1.42.59-.39.39-.58.86-.58 1.41zm5.6 0c0 .55.2 1.02.58 1.41.4.4.87.59 1.43.59.56 0 1.03-.2 1.42-.59.39-.39.58-.86.58-1.41 0-.55-.2-1.02-.58-1.41a1.93 1.93 0 0 0-1.42-.59c-.56 0-1.04.2-1.43.59-.39.39-.58.86-.58 1.41z" fill-rule="evenodd"></path></svg></button></div></div></div></div></div><div class="oe nb w"><ul class="be bf"><li class="dr of gf og"><a href="https://medium.com/tag/nestjs" class="at b oh oi aw oj ok lp w jr">Nestjs</a></li><li class="dr of gf og"><a href="https://medium.com/tag/mongodb" class="at b oh oi aw oj ok lp w jr">Mongodb</a></li><li class="dr of gf og"><a href="https://medium.com/tag/nodejs" class="at b oh oi aw oj ok lp w jr">Nodejs</a></li><li class="dr of gf og"><a href="https://medium.com/tag/mongodb-driver" class="at b oh oi aw oj ok lp w jr">Mongodb Driver</a></li><li class="dr of gf og"><a href="https://medium.com/tag/mongoose" class="at b oh oi aw oj ok lp w jr">Mongoose</a></li></ul></div><div class="ol w"></div></div></div><div><div class="n p"><div class="ae af ag ah ai ep ak t"><div class="w om on gd"></div></div></div><div class="w gd"><div class="oo op w oq"><div class="n p"><div class="ae af ag ah ai ep ak t"><div class="n o bn"><h2 class="at ir or os ot iu ou ov ow ix ox oy oz jb pa pb pc jf pd pe pf jj dp do pg ph pi pj cr"><a class="cu cv az ba bb bc bd be bf bg cw cx bj cy cz" rel="noopener" href="https://medium.com/@gusiol?source=follow_footer--------------------------follow_footer-----------">More from Gustavo Simões</a></h2><button class="at b au av ax ld le ay lf bh bi lg bg lh li lj lk ll lm ln lo ef dr lp">Follow</button></div></div></div></div></div><div class="pk w oq gd"><div class="n p"><div class="pl pm pn po pp pq ak t"><div class="ec ed tw w fo fp tx ty tz"><div class="n p"><div class="ae af ag ah ai ep ak t"><div class="t gr"><div class="w"><div class="o n"><div></div><div class="t n"><div class="n"><div style="flex: 1 1 0%;"><span class="at b au av cr"></span></div></div><span class="at b au av aw"><a class="" rel="noopener" href="https://medium.com/@gusiol/desenvolvimento-na-aws-s3-e-sqs-sem-custos-com-localstack-f525d015ca48?source=follow_footer---------0-----------------follow_footer-----------"><h4 class="at b au av aw">Apr 12</h4></a></span></div></div><div class="sa w"><div><div class="eg eh qn ej ek el"></div><section class="cm em en ch eo"><div><h1 id="cedb" class="eq ck er at bz is hg iu iv hk ix ua ub uc ud ue uf ug uh ui sa fm cr"><a class="cu lp" rel="noopener" href="https://medium.com/@gusiol/desenvolvimento-na-aws-s3-e-sqs-sem-custos-com-localstack-f525d015ca48?source=follow_footer---------0-----------------follow_footer-----------">Desenvolvimento na AWS (S3 e SQS) sem custos com Localstack</a></h1></div><figure class="fn gl ec ed paragraph-image"><div class="uj ec ed"><div class="gu w ab gv"><div class="uk gx w"><div class="qq qr eg gq eh gr t dp gs gt"><img alt="Image for post" class="eg gq eh gr t gy gz ha" src="./NestJS with MongoDB native driver _ by Gustavo Simões _ Medium_files/1_gF6rM1FFYyNj-KW4KH4Jeg.png" width="700" height="242"></div><img alt="Image for post" class="du gp eg gq eh gr t c" width="700" height="242"><noscript></noscript></div></div></div></figure><p id="47a0" class="hb hc er hd b he hg hh hi hk hl hm ho hp hq hs ht hu hw hx fn hy cm cr" data-selectable-paragraph="">Há alguns dias eu desenvolvi um projeto que envolvia manipular arquivos num bucket do serviço S3 da AWS. A minha primeira ideia foi utilizar o armazenamento local durante o desenvolvimento. No entanto, eu também pretendia disparar notificações para uma fila no SQS ao criar novos objetos no bucket. Este cenário não é facilmente simulado, logo, eu teria que utilizar os serviços da AWS durante o desenvolvimento, o que envolveria custos, já que meu período de testes havia expirado. Após pesquisar sobre alternativas sem custo, me deparei com o <a href="https://localstack.cloud/" class="cu ih" rel="noopener nofollow">Localstack</a>.</p><p id="d049" class="hb hc er hd b he hg hh hi hk hl hm ho hp hq hs ht hu hw hx ul hy cm cr" data-selectable-paragraph="">O Localstack é um projeto desenvolvido inicialmente pela <a href="https://www.atlassian.com/" class="cu ih" rel="noopener nofollow">Atlassian</a> e, atualmente independente, que permite utilizar funcionalidades e APIs da AWS em um ambiente local. Desse modo, é possível diminuir o custo de projetos, utilizando o Localstack em ambiente de desenvolvimento e para a execução de testes em integração contínua. …</p></section></div></div></div><div class="um w"><a class="cu cv az ba bb bc bd be bf bg cw cx bj cy cz" rel="noopener" href="https://medium.com/@gusiol/desenvolvimento-na-aws-s3-e-sqs-sem-custos-com-localstack-f525d015ca48?readmore=1&amp;source=follow_footer---------0-----------------follow_footer-----------"><h4 class="at b au av ax">Read more  · 6 min read</h4></a></div><div class="un n o bn"><div class="n o"><div class="n o"><div class="w ab lt lu lv lw lx"><div class=""><div><div class="dr" role="tooltip" aria-hidden="false" aria-describedby="34" aria-labelledby="34"><button class="be ly lz ma mb mc md qm r mf mg"><svg width="25" height="25" viewBox="0 0 25 25" aria-label="clap"><g fill-rule="evenodd"><path d="M11.74 0l.76 2.97.76-2.97zM14.81 3.78l1.84-2.56-1.42-.47zM8.38 1.22l1.84 2.56L9.8.75zM20.38 21.62a5.11 5.11 0 0 1-3.16 1.61l.49-.45c2.88-2.89 3.45-5.98 1.69-9.21l-1.1-1.94-.96-2.02c-.31-.67-.23-1.18.25-1.55a.84.84 0 0 1 .66-.16c.34.05.66.28.88.6l2.85 5.02c1.18 1.97 1.38 5.12-1.6 8.1M7.1 21.1l-5.02-5.02a1 1 0 0 1 .7-1.7 1 1 0 0 1 .72.3l2.6 2.6a.44.44 0 0 0 .63-.62L4.1 14.04l-1.75-1.75a1 1 0 1 1 1.41-1.41l4.15 4.15a.44.44 0 0 0 .63 0 .44.44 0 0 0 0-.62L4.4 10.26 3.22 9.08a1 1 0 0 1 0-1.4 1.02 1.02 0 0 1 1.41 0l1.18 1.16L9.96 13a.44.44 0 0 0 .62 0 .44.44 0 0 0 0-.63L6.43 8.22a.99.99 0 0 1-.3-.7.99.99 0 0 1 .3-.7 1 1 0 0 1 1.41 0l7 6.98a.44.44 0 0 0 .7-.5l-1.35-2.85c-.31-.68-.23-1.19.25-1.56a.85.85 0 0 1 .66-.16c.34.06.66.28.88.6L18.63 14c1.57 2.88 1.07 5.54-1.55 8.16a5.62 5.62 0 0 1-5.06 1.65 9.35 9.35 0 0 1-4.93-2.72zM11 5.98l2.56 2.56c-.5.6-.56 1.41-.15 2.28l.26.56-4.25-4.25a.98.98 0 0 1-.12-.45 1 1 0 0 1 .29-.7 1.02 1.02 0 0 1 1.41 0zm8.89 2.06c-.38-.56-.9-.92-1.49-1.01a1.74 1.74 0 0 0-1.34.33c-.38.29-.61.65-.71 1.06a2.1 2.1 0 0 0-1.1-.56 1.78 1.78 0 0 0-.99.13l-2.64-2.64a1.88 1.88 0 0 0-2.65 0 1.86 1.86 0 0 0-.48.85 1.89 1.89 0 0 0-2.67-.01 1.87 1.87 0 0 0-.5.9c-.76-.75-2-.75-2.7-.04a1.88 1.88 0 0 0 0 2.66c-.3.12-.61.29-.87.55a1.88 1.88 0 0 0 0 2.66l.62.62a1.88 1.88 0 0 0-.9 3.16l5.01 5.02c1.6 1.6 3.52 2.64 5.4 2.96a7.16 7.16 0 0 0 1.18.1c1.03 0 2-.25 2.9-.7A5.9 5.9 0 0 0 21 22.24c3.34-3.34 3.08-6.93 1.74-9.17l-2.87-5.04z"></path></g></svg></button></div></div></div></div><div class="w mh mi mj mk ml mm mn"><div class="mo"><h4 class="at b au av cr"><button class="cu cv az ba bb bc bd be bf bg cw cx bj cy cz">1 </button></h4></div></div></div><div class="uo n o up uq ur us ut"><a class="cu cv az ba bb bc bd be bf bg cw cx bj cy cz" rel="noopener" href="https://medium.com/@gusiol/desenvolvimento-na-aws-s3-e-sqs-sem-custos-com-localstack-f525d015ca48?responsesOpen=true&amp;source=follow_footer---------0-----------------follow_footer-----------"><button class="mb lz be"><div class="sk n o am"><div><div class="dr" role="tooltip" aria-hidden="false" aria-describedby="35" aria-labelledby="35"><svg width="25" height="25" class="r" aria-label="responses"><path d="M19.07 21.12a6.33 6.33 0 0 1-3.53-1.1 7.8 7.8 0 0 1-.7-.52c-.77.21-1.57.32-2.38.32-4.67 0-8.46-3.5-8.46-7.8C4 7.7 7.79 4.2 12.46 4.2c4.66 0 8.46 3.5 8.46 7.8 0 2.06-.85 3.99-2.4 5.45a6.28 6.28 0 0 0 1.14 2.59c.15.21.17.48.06.7a.69.69 0 0 1-.62.38h-.03zm0-1v.5l.03-.5h-.03zm-3.92-1.64l.21.2a6.09 6.09 0 0 0 3.24 1.54 7.14 7.14 0 0 1-.83-1.84 5.15 5.15 0 0 1-.16-.75 2.4 2.4 0 0 1-.02-.29v-.23l.18-.15a6.6 6.6 0 0 0 2.3-4.96c0-3.82-3.4-6.93-7.6-6.93-4.19 0-7.6 3.11-7.6 6.93 0 3.83 3.41 6.94 7.6 6.94.83 0 1.64-.12 2.41-.35l.28-.08z" fill-rule="evenodd"></path></svg></div></div><div class="w ab nw uu nx uv ny uw nz ux ob uy"></div></div></button></a></div></div><div class="n o uz"><div class="ct w"><div class="dr" aria-hidden="false"><button class="cu cv az ba bb bc bd be bf bg cw cx bj cy cz" aria-label="Share Post"><svg width="25" height="25" class="r"><g fill-rule="evenodd"><path d="M15.6 5a.42.42 0 0 0 .17-.3.42.42 0 0 0-.12-.33l-2.8-2.79a.5.5 0 0 0-.7 0l-2.8 2.8a.4.4 0 0 0-.1.32c0 .12.07.23.16.3h.02a.45.45 0 0 0 .57-.04l2-2V10c0 .28.23.5.5.5s.5-.22.5-.5V2.93l2.02 2.02c.08.07.18.12.3.13.11.01.21-.02.3-.08v.01"></path><path d="M18 7h-1.5a.5.5 0 0 0 0 1h1.6c.5 0 .9.4.9.9v10.2c0 .5-.4.9-.9.9H6.9a.9.9 0 0 1-.9-.9V8.9c0-.5.4-.9.9-.9h1.6a.5.5 0 0 0 .35-.15A.5.5 0 0 0 9 7.5a.5.5 0 0 0-.15-.35A.5.5 0 0 0 8.5 7H7a2 2 0 0 0-2 2v10c0 1.1.9 2 2 2h11a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2"></path></g></svg></button></div></div><div class="ct w"><div class="gg"><div><div class="dr" role="tooltip" aria-hidden="false" aria-describedby="36" aria-labelledby="36"><button class="cu cv az ba bb bc bd be bf bg cw cx bj cy cz" aria-label="Bookmark Post"><svg width="25" height="25" viewBox="0 0 25 25"><path d="M19 6a2 2 0 0 0-2-2H8a2 2 0 0 0-2 2v14.66h.01c.01.1.05.2.12.28a.5.5 0 0 0 .7.03l5.67-4.12 5.66 4.13a.5.5 0 0 0 .71-.03.5.5 0 0 0 .12-.29H19V6zm-6.84 9.97L7 19.64V6a1 1 0 0 1 1-1h9a1 1 0 0 1 1 1v13.64l-5.16-3.67a.49.49 0 0 0-.68 0z" fill-rule="evenodd"></path></svg></button></div></div></div></div></div></div></div></div></div></div><div class="ec ed tw w fw vc fy qi vd ve vf vg vh vi"><div class="n p"><div class="ae af ag ah ai ep ak t"><hr class="lz va vb bf"><div class="t gr"><div class="vj w"><div class="o n"><div></div><div class="t n"><div class="n"><div style="flex: 1 1 0%;"><span class="at b au av cr"></span></div></div><span class="at b au av aw"><a class="" rel="noopener" href="https://medium.com/@gusiol/hospedando-e-gerenciando-aplica%C3%A7%C3%B5es-num-mesmo-dom%C3%ADnio-com-nginx-proxy-e-portainer-ce13d3dd5e3e?source=follow_footer---------1-----------------follow_footer-----------"><h4 class="at b au av aw">Apr 1</h4></a></span></div></div><div class="sa w"><div><div class="eg eh qn ej ek el"></div><section class="cm em en ch eo"><div><h1 id="d648" class="eq ck er at bz is hg iu iv hk ix ua ub uc ud ue uf ug uh ui sa fm cr"><a class="cu lp" rel="noopener" href="https://medium.com/@gusiol/hospedando-e-gerenciando-aplica%C3%A7%C3%B5es-num-mesmo-dom%C3%ADnio-com-nginx-proxy-e-portainer-ce13d3dd5e3e?source=follow_footer---------1-----------------follow_footer-----------">nginx-proxy e Portainer: Múltiplas aplicações num só domínio</a></h1></div><p id="f0be" class="hb hc er hd b he hg hh hi hk hl hm ho hp hq hs ht hu hw hx vk hy cm cr" data-selectable-paragraph="">Quando trabalhei numa agência de desenvolvimento web existia a necessidade de testar as aplicações online e mostrá-las para os clientes. Como os projetos eram desenvolvidos em ambientes distintos (linguagem, banco, servidor, versão), surgiu o seguinte questionamento: como servir essas aplicações num só domínio?</p><p id="9706" class="hb hc er hd b he hg hh hi hk hl hm ho hp hq hs ht hu hw hx ul hy cm cr" data-selectable-paragraph="">Uma possibilidade é utilizar o <a href="https://www.docker.com/" class="cu ih" rel="noopener nofollow">docker</a>. Dessa forma os ambientes ficam isolados em containers e podemos expor cada um em portas distintas do hospedeiro. No entanto, o roteamento através de portas é pouco prático, o ideal é utilizar um DNS e mapear cada aplicação para um subdomínio distinto. Para tal podemos utilizar um proxy reverso.</p><p id="4d87" class="hb hc er hd b he hg hh hi hk hl hm ho hp hq hs ht hu hw hx ul hy cm cr" data-selectable-paragraph="">O proxy reverso é um servidor tipicamente situado à frente de outros servidores que recebe as requisições, faz o roteamento para o servidor alvo e retorna a resposta para o cliente, podendo também aplicar funcionalidades como certificado SSL, load balancer e cache. …</p></section></div></div></div><div class="um w"><a class="cu cv az ba bb bc bd be bf bg cw cx bj cy cz" rel="noopener" href="https://medium.com/@gusiol/hospedando-e-gerenciando-aplica%C3%A7%C3%B5es-num-mesmo-dom%C3%ADnio-com-nginx-proxy-e-portainer-ce13d3dd5e3e?readmore=1&amp;source=follow_footer---------1-----------------follow_footer-----------"><h4 class="at b au av ax">Read more  · 4 min read</h4></a></div><div class="un n o bn"><div class="n o"><div class="n o"><div class="w ab lt lu lv lw lx"><div class=""><div><div class="dr" role="tooltip" aria-hidden="false" aria-describedby="37" aria-labelledby="37"><button class="be ly lz ma mb mc md qm r mf mg"><svg width="25" height="25" viewBox="0 0 25 25" aria-label="clap"><g fill-rule="evenodd"><path d="M11.74 0l.76 2.97.76-2.97zM14.81 3.78l1.84-2.56-1.42-.47zM8.38 1.22l1.84 2.56L9.8.75zM20.38 21.62a5.11 5.11 0 0 1-3.16 1.61l.49-.45c2.88-2.89 3.45-5.98 1.69-9.21l-1.1-1.94-.96-2.02c-.31-.67-.23-1.18.25-1.55a.84.84 0 0 1 .66-.16c.34.05.66.28.88.6l2.85 5.02c1.18 1.97 1.38 5.12-1.6 8.1M7.1 21.1l-5.02-5.02a1 1 0 0 1 .7-1.7 1 1 0 0 1 .72.3l2.6 2.6a.44.44 0 0 0 .63-.62L4.1 14.04l-1.75-1.75a1 1 0 1 1 1.41-1.41l4.15 4.15a.44.44 0 0 0 .63 0 .44.44 0 0 0 0-.62L4.4 10.26 3.22 9.08a1 1 0 0 1 0-1.4 1.02 1.02 0 0 1 1.41 0l1.18 1.16L9.96 13a.44.44 0 0 0 .62 0 .44.44 0 0 0 0-.63L6.43 8.22a.99.99 0 0 1-.3-.7.99.99 0 0 1 .3-.7 1 1 0 0 1 1.41 0l7 6.98a.44.44 0 0 0 .7-.5l-1.35-2.85c-.31-.68-.23-1.19.25-1.56a.85.85 0 0 1 .66-.16c.34.06.66.28.88.6L18.63 14c1.57 2.88 1.07 5.54-1.55 8.16a5.62 5.62 0 0 1-5.06 1.65 9.35 9.35 0 0 1-4.93-2.72zM11 5.98l2.56 2.56c-.5.6-.56 1.41-.15 2.28l.26.56-4.25-4.25a.98.98 0 0 1-.12-.45 1 1 0 0 1 .29-.7 1.02 1.02 0 0 1 1.41 0zm8.89 2.06c-.38-.56-.9-.92-1.49-1.01a1.74 1.74 0 0 0-1.34.33c-.38.29-.61.65-.71 1.06a2.1 2.1 0 0 0-1.1-.56 1.78 1.78 0 0 0-.99.13l-2.64-2.64a1.88 1.88 0 0 0-2.65 0 1.86 1.86 0 0 0-.48.85 1.89 1.89 0 0 0-2.67-.01 1.87 1.87 0 0 0-.5.9c-.76-.75-2-.75-2.7-.04a1.88 1.88 0 0 0 0 2.66c-.3.12-.61.29-.87.55a1.88 1.88 0 0 0 0 2.66l.62.62a1.88 1.88 0 0 0-.9 3.16l5.01 5.02c1.6 1.6 3.52 2.64 5.4 2.96a7.16 7.16 0 0 0 1.18.1c1.03 0 2-.25 2.9-.7A5.9 5.9 0 0 0 21 22.24c3.34-3.34 3.08-6.93 1.74-9.17l-2.87-5.04z"></path></g></svg></button></div></div></div></div><div class="w mh mi mj mk ml mm mn"><div class="mo"><h4 class="at b au av cr"><button class="cu cv az ba bb bc bd be bf bg cw cx bj cy cz">6 </button></h4></div></div></div><div class="uo n o up uq ur us ut"><a class="cu cv az ba bb bc bd be bf bg cw cx bj cy cz" rel="noopener" href="https://medium.com/@gusiol/hospedando-e-gerenciando-aplica%C3%A7%C3%B5es-num-mesmo-dom%C3%ADnio-com-nginx-proxy-e-portainer-ce13d3dd5e3e?responsesOpen=true&amp;source=follow_footer---------1-----------------follow_footer-----------"><button class="mb lz be"><div class="sk n o am"><div><div class="dr" role="tooltip" aria-hidden="false" aria-describedby="38" aria-labelledby="38"><svg width="25" height="25" class="r" aria-label="responses"><path d="M19.07 21.12a6.33 6.33 0 0 1-3.53-1.1 7.8 7.8 0 0 1-.7-.52c-.77.21-1.57.32-2.38.32-4.67 0-8.46-3.5-8.46-7.8C4 7.7 7.79 4.2 12.46 4.2c4.66 0 8.46 3.5 8.46 7.8 0 2.06-.85 3.99-2.4 5.45a6.28 6.28 0 0 0 1.14 2.59c.15.21.17.48.06.7a.69.69 0 0 1-.62.38h-.03zm0-1v.5l.03-.5h-.03zm-3.92-1.64l.21.2a6.09 6.09 0 0 0 3.24 1.54 7.14 7.14 0 0 1-.83-1.84 5.15 5.15 0 0 1-.16-.75 2.4 2.4 0 0 1-.02-.29v-.23l.18-.15a6.6 6.6 0 0 0 2.3-4.96c0-3.82-3.4-6.93-7.6-6.93-4.19 0-7.6 3.11-7.6 6.93 0 3.83 3.41 6.94 7.6 6.94.83 0 1.64-.12 2.41-.35l.28-.08z" fill-rule="evenodd"></path></svg></div></div><div class="w ab nw uu nx uv ny uw nz ux ob uy"></div></div></button></a></div></div><div class="n o uz"><div class="ct w"><div class="dr" aria-hidden="false"><button class="cu cv az ba bb bc bd be bf bg cw cx bj cy cz" aria-label="Share Post"><svg width="25" height="25" class="r"><g fill-rule="evenodd"><path d="M15.6 5a.42.42 0 0 0 .17-.3.42.42 0 0 0-.12-.33l-2.8-2.79a.5.5 0 0 0-.7 0l-2.8 2.8a.4.4 0 0 0-.1.32c0 .12.07.23.16.3h.02a.45.45 0 0 0 .57-.04l2-2V10c0 .28.23.5.5.5s.5-.22.5-.5V2.93l2.02 2.02c.08.07.18.12.3.13.11.01.21-.02.3-.08v.01"></path><path d="M18 7h-1.5a.5.5 0 0 0 0 1h1.6c.5 0 .9.4.9.9v10.2c0 .5-.4.9-.9.9H6.9a.9.9 0 0 1-.9-.9V8.9c0-.5.4-.9.9-.9h1.6a.5.5 0 0 0 .35-.15A.5.5 0 0 0 9 7.5a.5.5 0 0 0-.15-.35A.5.5 0 0 0 8.5 7H7a2 2 0 0 0-2 2v10c0 1.1.9 2 2 2h11a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2"></path></g></svg></button></div></div><div class="ct w"><div class="gg"><div><div class="dr" role="tooltip" aria-hidden="false" aria-describedby="39" aria-labelledby="39"><button class="cu cv az ba bb bc bd be bf bg cw cx bj cy cz" aria-label="Bookmark Post"><svg width="25" height="25" viewBox="0 0 25 25"><path d="M19 6a2 2 0 0 0-2-2H8a2 2 0 0 0-2 2v14.66h.01c.01.1.05.2.12.28a.5.5 0 0 0 .7.03l5.67-4.12 5.66 4.13a.5.5 0 0 0 .71-.03.5.5 0 0 0 .12-.29H19V6zm-6.84 9.97L7 19.64V6a1 1 0 0 1 1-1h9a1 1 0 0 1 1 1v13.64l-5.16-3.67a.49.49 0 0 0-.68 0z" fill-rule="evenodd"></path></svg></button></div></div></div></div></div></div></div></div></div></div><div class="n p"><div class="ae af ag ah ai ep ak t"><hr class="lz va vb bf"></div></div></div></div></div><div class="w pr gd"><div class="n p"><div class="ae af ag ah ai aj ak t"></div></div></div></div></div></div><div class="ps w pt pu"><div class="n p"><div class="ae af ag ah ai aj ak t"><div class="n x"><div class="n o bn"><a aria-label="Go to homepage" class="cu cv az ba bb bc bd be bf bg pv pw bj px py" rel="noopener" href="https://medium.com/?source=post_page-----9d82e377d55--------------------------------"><svg viewBox="0 0 3940 610" class="pz qa"><path d="M594.79 308.2c0 163.76-131.85 296.52-294.5 296.52S5.8 472 5.8 308.2 137.65 11.69 300.29 11.69s294.5 132.75 294.5 296.51M917.86 308.2c0 154.16-65.93 279.12-147.25 279.12s-147.25-125-147.25-279.12S689.29 29.08 770.61 29.08s147.25 125 147.25 279.12M1050 308.2c0 138.12-23.19 250.08-51.79 250.08s-51.79-112-51.79-250.08 23.19-250.08 51.8-250.08S1050 170.09 1050 308.2M1862.77 37.4l.82-.18v-6.35h-167.48l-155.51 365.5-155.51-365.5h-180.48v6.35l.81.18c30.57 6.9 46.09 17.19 46.09 54.3v434.45c0 37.11-15.58 47.4-46.15 54.3l-.81.18V587H1327v-6.35l-.81-.18c-30.57-6.9-46.09-17.19-46.09-54.3V116.9L1479.87 587h11.33l205.59-483.21V536.9c-2.62 29.31-18 38.36-45.68 44.61l-.82.19v6.3h213.3v-6.3l-.82-.19c-27.71-6.25-43.46-15.3-46.08-44.61l-.14-445.2h.14c0-37.11 15.52-47.4 46.08-54.3m97.43 287.8c3.49-78.06 31.52-134.4 78.56-135.37 14.51.24 26.68 5 36.14 14.16 20.1 19.51 29.55 60.28 28.09 121.21zm-2.11 22h250v-1.05c-.71-59.69-18-106.12-51.34-138-28.82-27.55-71.49-42.71-116.31-42.71h-1c-23.26 0-51.79 5.64-72.09 15.86-23.11 10.7-43.49 26.7-60.45 47.7-27.3 33.83-43.84 79.55-47.86 130.93-.13 1.54-.24 3.08-.35 4.62s-.18 2.92-.25 4.39a332.64 332.64 0 0 0-.36 21.69C1860.79 507 1923.65 600 2035.3 600c98 0 155.07-71.64 169.3-167.8l-7.19-2.53c-25 51.68-69.9 83-121 79.18-69.76-5.22-123.2-75.95-118.35-161.63m532.69 157.68c-8.2 19.45-25.31 30.15-48.24 30.15s-43.89-15.74-58.78-44.34c-16-30.7-24.42-74.1-24.42-125.51 0-107 33.28-176.21 84.79-176.21 21.57 0 38.55 10.7 46.65 29.37zm165.84 76.28c-30.57-7.23-46.09-18-46.09-57V5.28L2424.77 60v6.7l1.14-.09c25.62-2.07 43 1.47 53.09 10.79 7.9 7.3 11.75 18.5 11.75 34.26v71.14c-18.31-11.69-40.09-17.38-66.52-17.38-53.6 0-102.59 22.57-137.92 63.56-36.83 42.72-56.3 101.1-56.3 168.81C2230 518.72 2289.53 600 2378.13 600c51.83 0 93.53-28.4 112.62-76.3V588h166.65v-6.66zm159.29-505.33c0-37.76-28.47-66.24-66.24-66.24-37.59 0-67 29.1-67 66.24s29.44 66.24 67 66.24c37.77 0 66.24-28.48 66.24-66.24m43.84 505.33c-30.57-7.23-46.09-18-46.09-57h-.13V166.65l-166.66 47.85v6.5l1 .09c36.06 3.21 45.93 15.63 45.93 57.77V588h166.8v-6.66zm427.05 0c-30.57-7.23-46.09-18-46.09-57V166.65L3082 212.92v6.52l.94.1c29.48 3.1 38 16.23 38 58.56v226c-9.83 19.45-28.27 31-50.61 31.78-36.23 0-56.18-24.47-56.18-68.9V166.66l-166.66 47.85V221l1 .09c36.06 3.2 45.94 15.62 45.94 57.77v191.27a214.48 214.48 0 0 0 3.47 39.82l3 13.05c14.11 50.56 51.08 77 109 77 49.06 0 92.06-30.37 111-77.89v66h166.66v-6.66zM3934.2 588v-6.67l-.81-.19c-33.17-7.65-46.09-22.07-46.09-51.43v-243.2c0-75.83-42.59-121.09-113.93-121.09-52 0-95.85 30.05-112.73 76.86-13.41-49.6-52-76.86-109.06-76.86-50.12 0-89.4 26.45-106.25 71.13v-69.87l-166.66 45.89v6.54l1 .09c35.63 3.16 45.93 15.94 45.93 57V588h155.5v-6.66l-.82-.2c-26.46-6.22-35-17.56-35-46.66V255.72c7-16.35 21.11-35.72 49-35.72 34.64 0 52.2 24 52.2 71.28V588h155.54v-6.66l-.82-.2c-26.46-6.22-35-17.56-35-46.66v-248a160.45 160.45 0 0 0-2.2-27.68c7.42-17.77 22.34-38.8 51.37-38.8 35.13 0 52.2 23.31 52.2 71.28V588z"></path></svg></a><h4 class="at b au av qb"><div class="s qc n bn qd qe"><h4 class="at b co cp qf"><a href="https://medium.com/about?autoplay=1&amp;source=post_page-----9d82e377d55--------------------------------" class="cu cv az ba bb bc bd be bf bg qg bj px py" rel="noopener">About</a></h4><h4 class="at b co cp qf"><a href="https://help.medium.com/hc/en-us?source=post_page-----9d82e377d55--------------------------------" class="cu cv az ba bb bc bd be bf bg qg bj px py" rel="noopener">Help</a></h4><h4 class="at b co cp qf"><a href="https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=post_page-----9d82e377d55--------------------------------" class="cu cv az ba bb bc bd be bf bg qg bj px py" rel="noopener">Legal</a></h4></div></h4></div><div class="y qh qi qe"><h4 class="at b co cp qb">Get the Medium app</h4></div><div class="y qh qj qe qk"><div class="ql w"><a href="https://itunes.apple.com/app/medium-everyones-stories/id828256236?pt=698524&amp;mt=8&amp;ct=post_page&amp;source=post_page-----9d82e377d55--------------------------------" class="cu cv az ba bb bc bd be bf bg pv pw bj px py" rel="noopener nofollow"><img alt="A button that says &#39;Download on the App Store&#39;, and if clicked it will lead you to the iOS App store" class="" src="./NestJS with MongoDB native driver _ by Gustavo Simões _ Medium_files/1_Crl55Tm6yDNMoucPo1tvDg.png" width="135" height="41"></a></div><div class="w"><a href="https://play.google.com/store/apps/details?id=com.medium.reader&amp;source=post_page-----9d82e377d55--------------------------------" class="cu cv az ba bb bc bd be bf bg pv pw bj px py" rel="noopener nofollow"><img alt="A button that says &#39;Get it on, Google Play&#39;, and if clicked it will lead you to the Google Play store" class="" src="./NestJS with MongoDB native driver _ by Gustavo Simões _ Medium_files/1_W_RAPQ62h0em559zluJLdQ.png" width="135" height="41"></a></div></div></div></div></div></div></div></div><script>window.__BUILD_ID__ = "main-20201023-205554-7ce08a0ad2"</script><script>window.__GRAPHQL_URI__ = "https://medium.com/_/graphql"</script><script>window.__PRELOADED_STATE__ = {"auroraPage":{"isAuroraPageEnabled":true},"config":{"nodeEnv":"production","version":"main-20201023-205554-7ce08a0ad2","productName":"Medium","publicUrl":"https:\u002F\u002Fcdn-client.medium.com\u002Flite","authDomain":"medium.com","authGoogleClientId":"216296035834-k1k6qe060s2tp2a2jam4ljdcms00sttg.apps.googleusercontent.com","favicon":"production","glyphUrl":"https:\u002F\u002Fglyph.medium.com","branchKey":"key_live_ofxXr2qTrrU9NqURK8ZwEhknBxiI6KBm","lightStep":{"name":"lite-web","host":"lightstep.medium.systems","token":"ce5be895bef60919541332990ac9fef2","appVersion":"main-20201023-205554-7ce08a0ad2"},"algolia":{"appId":"MQ57UUUQZ2","apiKeySearch":"394474ced050e3911ae2249ecc774921","indexPrefix":"medium_","host":"-dsn.algolia.net"},"recaptchaKey":"6Lfc37IUAAAAAKGGtC6rLS13R1Hrw_BqADfS1LRk","recaptcha3Key":"6Lf8R9wUAAAAABMI_85Wb8melS7Zj6ziuf99Yot5","datadog":{"clientToken":"pub853ea8d17ad6821d9f8f11861d23dfed","context":{"deployment":{"target":"production","tag":"main-20201023-205554-7ce08a0ad2","commit":"7ce08a0ad29052b8eb9570570475b1e66ce9b497"}},"datacenter":"us"},"isAmp":false,"googleAnalyticsCode":"UA-24232453-2","signInWallCustomDomainCollectionIds":["3a8144eabfe3","336d898217ee","61061eb0c96b","138adf9c44c","819cc2aaeee0"],"mediumOwnedAndOperatedCollectionIds":["544c7006046e","bcc38c8f6edf","444d13b52878","8d6b8a439e32","92d2092dc598","1285ba81cada","cb8577c9149e","8ccfed20cbb2","ae2a65f35510","3f6ecf56618","7b6769f2748b","fc8964313712","ef8e90590e66","191186aaafa0","d944778ce714","bdc4052bbdba","88d9857e584e","9dc80918cc93","8a9336e5bb4","cef6983b292","54c98c43354d","193b68bd4fba","b7e45b22fec3"],"tierOneDomains":["medium.com","thebolditalic.com","arcdigital.media","towardsdatascience.com","uxdesign.cc","codeburst.io","psiloveyou.xyz","writingcooperative.com","entrepreneurshandbook.co","prototypr.io","betterhumans.coach.me","theascent.pub"],"topicsToFollow":["d61cf867d93f","8a146bc21b28","1eca0103fff3","4d562ee63426","aef1078a3ef5","e15e46793f8d","6158eb913466","55f1c20aba7a","3d18b94f6858","4861fee224fd","63c6f1f93ee","1d98b3a9a871","decb52b64abf","ae5d4995e225","830cded25262"],"defaultImages":{"avatar":{"imageId":"1*dmbNkD5D-u45r44go_cf0g.png","height":150,"width":150},"orgLogo":{"imageId":"1*OMF3fSqH8t4xBJ9-6oZDZw.png","height":106,"width":545},"postLogo":{"imageId":"1*3sela1OADrJr7dJk_CXaEQ.png","height":810,"width":1440},"postPreviewImage":{"imageId":"1*hn4v1tCaJy7cWMyb0bpNpQ.png","height":386,"width":579}},"performanceTags":[],"collectionStructuredData":{"8d6b8a439e32":{"name":"Elemental","data":{"@type":"NewsMediaOrganization","ethicsPolicy":"https:\u002F\u002Fhelp.medium.com\u002Fhc\u002Fen-us\u002Farticles\u002F360043290473","logo":{"@type":"ImageObject","url":"https:\u002F\u002Fcdn-images-1.medium.com\u002Fmax\u002F980\u002F1*9ygdqoKprhwuTVKUM0DLPA@2x.png","width":980,"height":159}}},"3f6ecf56618":{"name":"Forge","data":{"@type":"NewsMediaOrganization","ethicsPolicy":"https:\u002F\u002Fhelp.medium.com\u002Fhc\u002Fen-us\u002Farticles\u002F360043290473","logo":{"@type":"ImageObject","url":"https:\u002F\u002Fcdn-images-1.medium.com\u002Fmax\u002F596\u002F1*uULpIlImcO5TDuBZ6lm7Lg@2x.png","width":596,"height":183}}},"ae2a65f35510":{"name":"GEN","data":{"@type":"NewsMediaOrganization","ethicsPolicy":"https:\u002F\u002Fhelp.medium.com\u002Fhc\u002Fen-us\u002Farticles\u002F360043290473","logo":{"@type":"ImageObject","url":"https:\u002F\u002Fmiro.medium.com\u002Fmax\u002F264\u002F1*RdVZMdvfV3YiZTw6mX7yWA.png","width":264,"height":140}}},"88d9857e584e":{"name":"LEVEL","data":{"@type":"NewsMediaOrganization","ethicsPolicy":"https:\u002F\u002Fhelp.medium.com\u002Fhc\u002Fen-us\u002Farticles\u002F360043290473","logo":{"@type":"ImageObject","url":"https:\u002F\u002Fmiro.medium.com\u002Fmax\u002F540\u002F1*JqYMhNX6KNNb2UlqGqO2WQ.png","width":540,"height":108}}},"7b6769f2748b":{"name":"Marker","data":{"@type":"NewsMediaOrganization","ethicsPolicy":"https:\u002F\u002Fhelp.medium.com\u002Fhc\u002Fen-us\u002Farticles\u002F360043290473","logo":{"@type":"ImageObject","url":"https:\u002F\u002Fcdn-images-1.medium.com\u002Fmax\u002F383\u002F1*haCUs0wF6TgOOvfoY-jEoQ@2x.png","width":383,"height":92}}},"444d13b52878":{"name":"OneZero","data":{"@type":"NewsMediaOrganization","ethicsPolicy":"https:\u002F\u002Fhelp.medium.com\u002Fhc\u002Fen-us\u002Farticles\u002F360043290473","logo":{"@type":"ImageObject","url":"https:\u002F\u002Fmiro.medium.com\u002Fmax\u002F540\u002F1*cw32fIqCbRWzwJaoQw6BUg.png","width":540,"height":123}}},"8ccfed20cbb2":{"name":"Zora","data":{"@type":"NewsMediaOrganization","ethicsPolicy":"https:\u002F\u002Fhelp.medium.com\u002Fhc\u002Fen-us\u002Farticles\u002F360043290473","logo":{"@type":"ImageObject","url":"https:\u002F\u002Fmiro.medium.com\u002Fmax\u002F540\u002F1*tZUQqRcCCZDXjjiZ4bDvgQ.png","width":540,"height":106}}}},"embeddedPostIds":{"coronavirus":"cd3010f9d81f"},"sharedCdcMessaging":{"COVID_APPLICABLE_TAG_SLUGS":["pandemic","epidemic","coronavirus","covid19","co-vid-19","containment","self-care","flatten-the-curve","public-health","virus","public-health-crisis","quarantine","self-quarantine","zika","corona","disease-prevention","wuhan","chinavirus","outbreak","influenza","socialdistancing","social-distance","flu","vaccines","healthcare","medicine","conspiracy-theories","conspiracy","virality","epidemia","pandemia","salud","corona-e-virus","coronavirus-covid19","covid-19","covid-19-symptoms","covid-19-crisis","covid-19-testing","covid-19-treatment","coronavirus-update","coronavirus-diaries"],"COVID_APPLICABLE_TOPIC_NAMES":["coronavirus"],"COVID_APPLICABLE_TOPIC_NAMES_FOR_TOPIC_PAGE":["coronavirus","health"],"COVID_MESSAGES":{"tierA":{"text":"For more information on the novel coronavirus and Covid-19, visit cdc.gov.","markups":[{"start":66,"end":73,"href":"https:\u002F\u002Fwww.cdc.gov\u002Fcoronavirus\u002F2019-nCoV"}]},"tierB":{"text":"Anyone can publish on Medium per our Policies, but we don’t fact-check every story. For more info about the coronavirus, see cdc.gov.","markups":[{"start":37,"end":45,"href":"https:\u002F\u002Fhelp.medium.com\u002Fhc\u002Fen-us\u002Fcategories\u002F201931128-Policies-Safety"},{"start":125,"end":132,"href":"https:\u002F\u002Fwww.cdc.gov\u002Fcoronavirus\u002F2019-nCoV"}]},"paywall":{"text":"This article has been made free for everyone, thanks to Medium Members. For more information on the novel coronavirus and Covid-19, visit cdc.gov.","markups":[{"start":56,"end":70,"href":"https:\u002F\u002Fmedium.com\u002Fmembership"},{"start":138,"end":145,"href":"https:\u002F\u002Fwww.cdc.gov\u002Fcoronavirus\u002F2019-nCoV"}]},"unbound":{"text":"This article is free for everyone, thanks to Medium Members. For more information on the novel coronavirus and Covid-19, visit cdc.gov.","markups":[{"start":45,"end":59,"href":"https:\u002F\u002Fmedium.com\u002Fmembership"},{"start":127,"end":134,"href":"https:\u002F\u002Fwww.cdc.gov\u002Fcoronavirus\u002F2019-nCoV"}]}},"COVID_BANNER_POST_ID_OVERRIDE_WHITELIST":["3b31a67bff4a"]},"sharedVoteMessaging":{"TAGS":["politics","election-2020","government","us-politics","election","2020-presidential-race","trump","donald-trump","democrats","republicans","congress","republican-party","democratic-party","biden","joe-biden","maga"],"TOPICS":["politics","election"],"MESSAGE":{"text":"Check your U.S. voter registration status or register to vote here.","markups":[{"start":62,"end":66,"href":"https:\u002F\u002Fwww.vote.org\u002F"}]},"EXCLUDE_POSTS":["397ef29e3ca5"]},"embedPostRules":[],"recircOptions":{"v1":{"limit":3},"v2":{"limit":8}},"braintreeClientKey":"production_zjkj96jm_m56f8fqpf7ngnrd4","paypalClientId":"AXj1G4fotC2GE8KzWX9mSxCH1wmPE3nJglf4Z2ig_amnhvlMVX87otaq58niAg9iuLktVNF_1WCMnN7v"},"debug":{"requestId":"2e6685a3-852c-480d-9e8c-af19b5167019","originalSpanCarrier":{"ot-tracer-spanid":"73f68e7034799be4","ot-tracer-traceid":"465141f3b0d0890e","ot-tracer-sampled":"true"}},"session":{"user":{"id":"8493f4d077e7"},"xsrf":"8bc1f476ec5d","isSpoofed":false},"stats":{"itemCount":0,"sending":false,"timeout":null,"backup":{}},"navigation":{"branch":{"show":null,"hasRendered":null,"blockedByCTA":false},"hideGoogleOneTap":false,"hasRenderedGoogleOneTap":null,"hasRenderedAlternateUserBanner":null,"currentLocation":"https:\u002F\u002Fmedium.com\u002F@gusiol\u002Fnestjs-with-mongodb-native-driver-9d82e377d55","host":"medium.com","hostname":"medium.com","referrer":"https:\u002F\u002Fwww.google.com\u002F","susiModal":{"step":null,"operation":"register"},"postRead":false},"client":{"isBot":false,"isEu":false,"isUs":true,"isNativeMedium":false,"isSafariMobile":false,"isSafari":true,"inAppBrowserName":"","routingEntity":{"type":"DEFAULT","explicit":false},"supportsWebp":true},"multiVote":{"clapsPerPost":{}},"tracing":{}}</script><script>window.__APOLLO_STATE__ = {"ROOT_QUERY":{"__typename":"Query","variantFlags":[{"__typename":"VariantFlag","name":"allow_access","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"allow_signup","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"allow_test_auth","valueType":{"__typename":"VariantFlagString","value":"disallow"}},{"__typename":"VariantFlag","name":"assign_default_topic_to_posts","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"available_annual_plan","valueType":{"__typename":"VariantFlagString","value":"2c754bcc2995"}},{"__typename":"VariantFlag","name":"available_monthly_plan","valueType":{"__typename":"VariantFlagString","value":"60e220181034"}},{"__typename":"VariantFlag","name":"bane_add_user","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"bane_verify_domain","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"branch_seo_metadata","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"browsable_stream_config_bucket","valueType":{"__typename":"VariantFlagString","value":"curated-topics"}},{"__typename":"VariantFlag","name":"coronavirus_topic_recirc","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"covid_19_cdc_banner","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"default_seo_post_titles","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"disable_android_subscription_activity_carousel","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"disable_ios_resume_reading_toast","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"disable_ios_subscription_activity_carousel","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"disable_mobile_featured_chunk","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"disable_post_recommended_from_friends_provider","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_add_membership_lock","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_admin_mark_as_paid","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_alt_medium101_subject","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_android_local_currency","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_annual_renewal_reminder_email","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_app_flirty_thirty","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_apple_sign_in","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_apple_webhook","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_apple_webhook_crossgrading","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_apple_webhook_renewal_failure","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_apple_webhook_renewal_status","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_aurora_about_page_routing","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_aurora_general_admission","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_aurora_profile_about_page","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_aurora_profile_page","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_aurora_profiles_for_all","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_aurora_recirc","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_aurora_tag_page_routing","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_auto_forfeit_earnings","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_automated_mission_control_triggers","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_avatar_component_in_newsletterv3_settings_page","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_braintree_integration","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_braintree_membership","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_braintree_paypal","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_braintree_webhook","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_branch_io","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_branch_text_me_the_app","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_branding","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_branding_fonts","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_cleansweep_double_writes","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_confirm_sign_in","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_creators_redirect","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_cta_meter","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_curation_priority_queue_experiment","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_daily_read_digest_promo","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_dedicated_series_tab_api_ios","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_detailed_billing_history","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_different_grid","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_digest_feature_logging","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_digest_tagline","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_disregard_trunc_state_for_footer","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_earn_redirect","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_edit_alt_text","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_email_sign_in_captcha","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_embedding_based_diversification","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_end_of_post_cleanup","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_evhead_com_to_ev_medium_com_redirect","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_expanded_feature_chunk_pool","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_filter_by_resend_rules","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_filter_expire_processor","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_footer_app_buttons","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_free_corona_topic","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_global_susi_modal","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_google_one_tap","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_google_webhook","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_highlander_member_digest","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_ios_post_stats","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_janky_spam_rules","valueType":{"__typename":"VariantFlagString","value":"users,posts"}},{"__typename":"VariantFlag","name":"enable_json_logs_trained_ranker","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_kbfd_rex","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_kbfd_rex_app_highlights","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_kbfd_rex_daily_digest","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_lite_homepage","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_lite_homepage_feed","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_lite_lo_homepage","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_lite_notifications","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_lite_pay_page","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_lite_post","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_lite_post_cd","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_lite_post_highlights","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_lite_post_highlights_view_only","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_lite_profile","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_lite_pub_header_menu","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_lite_pub_homepage_for_selected_domains","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_lite_server_upstream_deadlines","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_lite_stories","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_lite_topics","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_lite_unread_notification_count_mutation","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_lock_responses","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_login_code_flow","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_marketing_emails","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_media_resource_try_catch","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_membership_redirect","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_membership_remove_section_a","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_meta_header_v2","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_miro_on_kubernetes","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_ml_rank_modules","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_ml_rank_rex_anno","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_more_on_coronavirus","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_mute","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_new_checkout_flow","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_new_collaborative_filtering_data","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_new_susi_modal","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_new_suspended_page","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_new_three_dot_menu","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_optimizely","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_parsely","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_patronus_on_kubernetes","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_popularity_feature","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_post_import","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_post_page_nav_stickiness_removal","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_post_seo_settings_screen","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_post_settings_screen","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_post_table_of_contents","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_primary_topic_for_mobile","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_profile_page_seo_titles","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_profile_subdomains","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_responses_2","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_responses_all","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_responses_edit_and_delete","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_responses_highlight","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_responses_moderation","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_rito_upstream_deadlines","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_rtr_channel","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_save_to_medium","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_scheduled_delivery_refactor","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_signup_friction","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_sohne","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_starspace","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_starspace_ranker_starspace","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_tick_landing_page","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_ticks_digest_promo","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_tipalti_onboarding","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_topic_lifecycle_email","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_trending_posts_diversification","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_tribute_landing_page","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_trumpland_landing_page","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"enable_unbound","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"filter_stripe_invoice_line_items","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"generate_pub_digest_on_digest_pipeline","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"glyph_embed_commands","valueType":{"__typename":"VariantFlagString","value":"control"}},{"__typename":"VariantFlag","name":"glyph_font_set","valueType":{"__typename":"VariantFlagString","value":"m2-unbound"}},{"__typename":"VariantFlag","name":"google_sign_in_android","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"ios_enable_generic_home_modules","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"ios_enable_iceland_paywall","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"ios_pub_follow_email_opt_in","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"is_not_medium_subscriber","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"kill_fastrak","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"kill_stripe_express","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"limit_post_referrers","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"make_nav_sticky","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"new_transition_page","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"pub_sidebar","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"remove_post_post_similarity","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"retrained_ranker","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"sign_up_with_email_button","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"signin_services","valueType":{"__typename":"VariantFlagString","value":"twitter,facebook,google,email,google-fastidv,google-one-tap,apple"}},{"__typename":"VariantFlag","name":"signup_services","valueType":{"__typename":"VariantFlagString","value":"twitter,facebook,google,email,google-fastidv,google-one-tap,apple"}},{"__typename":"VariantFlag","name":"skip_sign_in_recaptcha","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"use_new_admin_topic_backend","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"vote_banner","valueType":{"__typename":"VariantFlagBoolean","value":true}},{"__typename":"VariantFlag","name":"xgboost_auto_suspend","valueType":{"__typename":"VariantFlagBoolean","value":true}}],"viewer":{"__ref":"User:8493f4d077e7"},"meterPost({\"postId\":\"9d82e377d55\",\"postMeteringOptions\":{\"referrer\":\"https:\u002F\u002Fwww.google.com\u002F\"}})":{"__ref":"MeteringInfo:{}"},"postResult({\"id\":\"9d82e377d55\"})":{"__ref":"Post:9d82e377d55"}},"User:8493f4d077e7":{"id":"8493f4d077e7","__typename":"User","username":"rsn3230","name":"Rohit Singh Niranjan","imageId":"0*O7JrhxxQ4KkyVr1c.jpg","mediumMemberAt":0,"hasPastMemberships":false,"isPartnerProgramEnrolled":false,"email":"rsn3230@gmail.com","unverifiedEmail":"","createdAt":1553270684887,"isAuroraVisible":true,"isEligibleToViewNewResponses":true,"isMembershipTrialEligible":true,"isSuspended":false,"styleEditorOnboardingVersionSeen":0,"allowEmailAddressSharing":false,"hasDomain":false},"MeteringInfo:{}":{"__typename":"MeteringInfo","postIds":[],"maxUnlockCount":3,"unlocksRemaining":3},"User:12f957494f66":{"id":"12f957494f66","__typename":"User","isSuspended":false,"name":"Gustavo Simões","username":"gusiol","bio":"","hasDomain":false,"customStyleSheet":null,"isAuroraVisible":true,"socialStats":{"__typename":"SocialStats","followerCount":3},"isBlocking":false,"imageId":"2*ivFpNEvlDi6c8YTZf9Uo0A.jpeg","mediumMemberAt":0,"isMuting":false,"isFollowing":false,"allowNotes":true,"twitterScreenName":"","isPartnerProgramEnrolled":false},"Paragraph:3db45c14a78c_0":{"id":"3db45c14a78c_0","__typename":"Paragraph","name":"486b","text":"NestJS with MongoDB native driver","type":"H3","href":null,"layout":null,"metadata":null,"hasDropCap":null,"iframe":null,"mixtapeMetadata":null,"markups":[],"dropCapImage":null},"Paragraph:3db45c14a78c_1":{"id":"3db45c14a78c_1","__typename":"Paragraph","name":"1436","text":"","type":"IMG","href":null,"layout":"INSET_CENTER","metadata":{"__ref":"ImageMetadata:1*jiqgT2HxAe1c_48yEdcZwQ.png"},"hasDropCap":null,"iframe":null,"mixtapeMetadata":null,"markups":[],"dropCapImage":null},"Paragraph:3db45c14a78c_2":{"id":"3db45c14a78c_2","__typename":"Paragraph","name":"1d50","text":"Let’s build a application with NestJS and MongoDB.","type":"P","href":null,"layout":null,"metadata":null,"hasDropCap":null,"iframe":null,"mixtapeMetadata":null,"markups":[],"dropCapImage":null},"Paragraph:3db45c14a78c_3":{"id":"3db45c14a78c_3","__typename":"Paragraph","name":"ee7b","text":"Install NestJS","type":"OLI","href":null,"layout":null,"metadata":null,"hasDropCap":null,"iframe":null,"mixtapeMetadata":null,"markups":[],"dropCapImage":null},"Paragraph:3db45c14a78c_4":{"id":"3db45c14a78c_4","__typename":"Paragraph","name":"76f3","text":"Install Mongoose","type":"OLI","href":null,"layout":null,"metadata":null,"hasDropCap":null,"iframe":null,"mixtapeMetadata":null,"markups":[{"__typename":"Markup","start":8,"end":16,"type":"A","href":"https:\u002F\u002Fmongoosejs.com\u002F","anchorType":"LINK","userId":null,"linkMetadata":null}],"dropCapImage":null},"Paragraph:3db45c14a78c_5":{"id":"3db45c14a78c_5","__typename":"Paragraph","name":"a7b9","text":"","type":"IMG","href":null,"layout":"INSET_CENTER","metadata":{"__ref":"ImageMetadata:1*CTi-n23g998yqJFNrqBhaw.jpeg"},"hasDropCap":null,"iframe":null,"mixtapeMetadata":null,"markups":[],"dropCapImage":null},"Paragraph:3db45c14a78c_6":{"id":"3db45c14a78c_6","__typename":"Paragraph","name":"386a","text":"Do I really need Mongoose? I see a lot of articles, videos and courses about NodeJS \u002F MongoDB stack applications that apply Mongoose right from the start, sometimes without being clear about the reasons to do so.","type":"P","href":null,"layout":null,"metadata":null,"hasDropCap":null,"iframe":null,"mixtapeMetadata":null,"markups":[],"dropCapImage":null},"Paragraph:3db45c14a78c_7":{"id":"3db45c14a78c_7","__typename":"Paragraph","name":"b887","text":"Introduction","type":"H3","href":null,"layout":null,"metadata":null,"hasDropCap":null,"iframe":null,"mixtapeMetadata":null,"markups":[],"dropCapImage":null},"Paragraph:3db45c14a78c_8":{"id":"3db45c14a78c_8","__typename":"Paragraph","name":"9144","text":"Coming from a SQL world, using Mongoose can feel more natural as it uses schemas that define a structure for the data. But being schemaless is one of NoSQL main advantages. That is particularly interesting when you don’t know before hand the kind of data you will receive. Also, in the early stages of web development, the business rules may suffer many changes, so having a schemaless database can be an advantage. Mongoose applies the schema in the application layer, although the database itself remains schemaless, its behavior considering the application, isn’t.","type":"P","href":null,"layout":null,"metadata":null,"hasDropCap":null,"iframe":null,"mixtapeMetadata":null,"markups":[],"dropCapImage":null},"Paragraph:3db45c14a78c_9":{"id":"3db45c14a78c_9","__typename":"Paragraph","name":"fe4f","text":"It is true that most of the material I referenced earlier had a well defined data structure so using schemas is fine. But it is also true that those applications could easily be build with NodeJS native MongoDB driver. And if you still feel the need for using schemas, the native driver also provides MongoDB JSON Schema, a flexible schema implementation since version 3.6 (2017).","type":"P","href":null,"layout":null,"metadata":null,"hasDropCap":null,"iframe":null,"mixtapeMetadata":null,"markups":[{"__typename":"Markup","start":190,"end":217,"type":"A","href":"https:\u002F\u002Fmongodb.github.io\u002Fnode-mongodb-native\u002F","anchorType":"LINK","userId":null,"linkMetadata":null},{"__typename":"Markup","start":301,"end":320,"type":"A","href":"https:\u002F\u002Fdocs.mongodb.com\u002Fmanual\u002Fcore\u002Fschema-validation\u002F#json-schema","anchorType":"LINK","userId":null,"linkMetadata":null}],"dropCapImage":null},"Paragraph:3db45c14a78c_10":{"id":"3db45c14a78c_10","__typename":"Paragraph","name":"4a8d","text":"One thing I do not like is that as Mongoose adds an abstraction layer, the developer tends not to know how to use MongoDB native syntax which I believe is important. I do like Mongoose, it certainly is a well written and powerful tool, it provides a fast way to build applications in NodeJS \u002F MongoDB stack, it offers others functionalities apart from schemas, it does facilitates some operations and helped me when starting in NoSQL world. But part of the reason for this last one is that I did not saw a lot of material about using this stack with the native driver as I did with Mongoose. That is what motivated me to write this article.","type":"P","href":null,"layout":null,"metadata":null,"hasDropCap":null,"iframe":null,"mixtapeMetadata":null,"markups":[],"dropCapImage":null},"Paragraph:3db45c14a78c_11":{"id":"3db45c14a78c_11","__typename":"Paragraph","name":"d795","text":"My goal is to provide the option of using the native driver which can already offer everything you need in your application with better performance, less dependencies and also a simple and nice coding experience. I’m using NestJS as its official documentation only covers integration with Mongoose and TypeORM.","type":"P","href":null,"layout":null,"metadata":null,"hasDropCap":null,"iframe":null,"mixtapeMetadata":null,"markups":[{"__typename":"Markup","start":302,"end":309,"type":"A","href":"https:\u002F\u002Ftypeorm.io\u002F","anchorType":"LINK","userId":null,"linkMetadata":null}],"dropCapImage":null},"Paragraph:3db45c14a78c_12":{"id":"3db45c14a78c_12","__typename":"Paragraph","name":"5724","text":"Implementation","type":"H3","href":null,"layout":null,"metadata":null,"hasDropCap":null,"iframe":null,"mixtapeMetadata":null,"markups":[],"dropCapImage":null},"Paragraph:3db45c14a78c_13":{"id":"3db45c14a78c_13","__typename":"Paragraph","name":"5b30","text":"1. Install NodeJS native MongoDB driver","type":"P","href":null,"layout":null,"metadata":null,"hasDropCap":null,"iframe":null,"mixtapeMetadata":null,"markups":[{"__typename":"Markup","start":0,"end":39,"type":"STRONG","href":null,"anchorType":null,"userId":null,"linkMetadata":null}],"dropCapImage":null},"Paragraph:3db45c14a78c_14":{"id":"3db45c14a78c_14","__typename":"Paragraph","name":"9fa4","text":"npm install mongodb --save","type":"PRE","href":null,"layout":null,"metadata":null,"hasDropCap":null,"iframe":null,"mixtapeMetadata":null,"markups":[],"dropCapImage":null},"Paragraph:3db45c14a78c_15":{"id":"3db45c14a78c_15","__typename":"Paragraph","name":"edf3","text":"2. Connect to the database\nHere I created a database module with a provider DATABASE_CONNECTION. First I make a instance of MongoClient that connect to the cluster using the connect method which receives as parameters a MongoDB connection string and a optional options object. Then I return a database instance db to a particular database name from this provider.","type":"P","href":null,"layout":null,"metadata":null,"hasDropCap":null,"iframe":null,"mixtapeMetadata":null,"markups":[{"__typename":"Markup","start":76,"end":95,"type":"CODE","href":null,"anchorType":null,"userId":null,"linkMetadata":null},{"__typename":"Markup","start":124,"end":135,"type":"CODE","href":null,"anchorType":null,"userId":null,"linkMetadata":null},{"__typename":"Markup","start":174,"end":181,"type":"CODE","href":null,"anchorType":null,"userId":null,"linkMetadata":null},{"__typename":"Markup","start":311,"end":313,"type":"CODE","href":null,"anchorType":null,"userId":null,"linkMetadata":null},{"__typename":"Markup","start":0,"end":26,"type":"STRONG","href":null,"anchorType":null,"userId":null,"linkMetadata":null}],"dropCapImage":null},"Paragraph:3db45c14a78c_16":{"id":"3db45c14a78c_16","__typename":"Paragraph","name":"0e62","text":"database.module.ts","type":"IFRAME","href":null,"layout":"INSET_CENTER","metadata":null,"hasDropCap":null,"iframe":{"__typename":"Iframe","mediaResource":{"__ref":"MediaResource:76a90b8c865f2ebe5817c0bd5a38470f"}},"mixtapeMetadata":null,"markups":[{"__typename":"Markup","start":0,"end":18,"type":"CODE","href":null,"anchorType":null,"userId":null,"linkMetadata":null}],"dropCapImage":null},"Paragraph:3db45c14a78c_17":{"id":"3db45c14a78c_17","__typename":"Paragraph","name":"e227","text":"3. Import the Database module from other modules\nHere I’m importing the database module from a users module.","type":"P","href":null,"layout":null,"metadata":null,"hasDropCap":null,"iframe":null,"mixtapeMetadata":null,"markups":[{"__typename":"Markup","start":0,"end":49,"type":"STRONG","href":null,"anchorType":null,"userId":null,"linkMetadata":null}],"dropCapImage":null},"Paragraph:3db45c14a78c_18":{"id":"3db45c14a78c_18","__typename":"Paragraph","name":"ef5d","text":"users.module.ts","type":"IFRAME","href":null,"layout":"INSET_CENTER","metadata":null,"hasDropCap":null,"iframe":{"__typename":"Iframe","mediaResource":{"__ref":"MediaResource:a68a3deb5080cc497e81875f641092a3"}},"mixtapeMetadata":null,"markups":[],"dropCapImage":null},"Paragraph:3db45c14a78c_19":{"id":"3db45c14a78c_19","__typename":"Paragraph","name":"9cbd","text":"4. Use the connection in services across the application\nNow you can inject the database instance to your services and use native MongoDB queries to interact with the data. Here is an example of a basic users CRUD implementation.","type":"P","href":null,"layout":null,"metadata":null,"hasDropCap":null,"iframe":null,"mixtapeMetadata":null,"markups":[{"__typename":"Markup","start":0,"end":57,"type":"STRONG","href":null,"anchorType":null,"userId":null,"linkMetadata":null}],"dropCapImage":null},"Paragraph:3db45c14a78c_20":{"id":"3db45c14a78c_20","__typename":"Paragraph","name":"1d0c","text":"users.service.ts","type":"IFRAME","href":null,"layout":"INSET_CENTER","metadata":null,"hasDropCap":null,"iframe":{"__typename":"Iframe","mediaResource":{"__ref":"MediaResource:f74f85339c421d2b9d228ed4ed05c5d6"}},"mixtapeMetadata":null,"markups":[],"dropCapImage":null},"Paragraph:3db45c14a78c_21":{"id":"3db45c14a78c_21","__typename":"Paragraph","name":"aa57","text":"As you can see, the queries are pretty intuitive and similar to Mongoose methods. Here are some differences.","type":"P","href":null,"layout":null,"metadata":null,"hasDropCap":null,"iframe":null,"mixtapeMetadata":null,"markups":[],"dropCapImage":null},"Paragraph:3db45c14a78c_22":{"id":"3db45c14a78c_22","__typename":"Paragraph","name":"0784","text":"You need to specify the collection name were the query is to run;","type":"OLI","href":null,"layout":null,"metadata":null,"hasDropCap":null,"iframe":null,"mixtapeMetadata":null,"markups":[],"dropCapImage":null},"Paragraph:3db45c14a78c_23":{"id":"3db45c14a78c_23","__typename":"Paragraph","name":"eb5f","text":"MongoDB by default stores each document with a ObjectId BSON type primary key named _id. When your query uses this key you need to convert the string value to a ObjectId type;","type":"OLI","href":null,"layout":null,"metadata":null,"hasDropCap":null,"iframe":null,"mixtapeMetadata":null,"markups":[{"__typename":"Markup","start":84,"end":87,"type":"CODE","href":null,"anchorType":null,"userId":null,"linkMetadata":null},{"__typename":"Markup","start":161,"end":169,"type":"CODE","href":null,"anchorType":null,"userId":null,"linkMetadata":null},{"__typename":"Markup","start":47,"end":65,"type":"A","href":"https:\u002F\u002Fdocs.mongodb.com\u002Fmanual\u002Freference\u002Fbson-types\u002F#objectid","anchorType":"LINK","userId":null,"linkMetadata":null}],"dropCapImage":null},"Paragraph:3db45c14a78c_24":{"id":"3db45c14a78c_24","__typename":"Paragraph","name":"a018","text":"If the _id comes in the request, you need to check if is a valid ObjectId;","type":"OLI","href":null,"layout":null,"metadata":null,"hasDropCap":null,"iframe":null,"mixtapeMetadata":null,"markups":[{"__typename":"Markup","start":7,"end":10,"type":"CODE","href":null,"anchorType":null,"userId":null,"linkMetadata":null},{"__typename":"Markup","start":65,"end":73,"type":"CODE","href":null,"anchorType":null,"userId":null,"linkMetadata":null}],"dropCapImage":null},"Paragraph:3db45c14a78c_25":{"id":"3db45c14a78c_25","__typename":"Paragraph","name":"2873","text":"Update queries do not return the updated document. If you need to access it before the query is executed you will have to do a subsequent find;","type":"OLI","href":null,"layout":null,"metadata":null,"hasDropCap":null,"iframe":null,"mixtapeMetadata":null,"markups":[{"__typename":"Markup","start":138,"end":142,"type":"CODE","href":null,"anchorType":null,"userId":null,"linkMetadata":null}],"dropCapImage":null},"Paragraph:3db45c14a78c_26":{"id":"3db45c14a78c_26","__typename":"Paragraph","name":"e770","text":"You need to manually throw exceptions based on the return from the query execution;","type":"OLI","href":null,"layout":null,"metadata":null,"hasDropCap":null,"iframe":null,"mixtapeMetadata":null,"markups":[],"dropCapImage":null},"Paragraph:3db45c14a78c_27":{"id":"3db45c14a78c_27","__typename":"Paragraph","name":"2a33","text":"Validation","type":"H3","href":null,"layout":null,"metadata":null,"hasDropCap":null,"iframe":null,"mixtapeMetadata":null,"markups":[],"dropCapImage":null},"Paragraph:3db45c14a78c_28":{"id":"3db45c14a78c_28","__typename":"Paragraph","name":"253a","text":"As in any API, the requests need to be validated. When the document data comes from the request and the request is validated before processing, you should not need to re-validate it in the schema. In NestJS, you can validate your request data with class-validator as follows.","type":"P","href":null,"layout":null,"metadata":null,"hasDropCap":null,"iframe":null,"mixtapeMetadata":null,"markups":[{"__typename":"Markup","start":248,"end":263,"type":"A","href":"https:\u002F\u002Fdocs.nestjs.com\u002Ftechniques\u002Fvalidation#validation","anchorType":"LINK","userId":null,"linkMetadata":null}],"dropCapImage":null},"Paragraph:3db45c14a78c_29":{"id":"3db45c14a78c_29","__typename":"Paragraph","name":"4d60","text":"createUser.dto.ts","type":"IFRAME","href":null,"layout":"INSET_CENTER","metadata":null,"hasDropCap":null,"iframe":{"__typename":"Iframe","mediaResource":{"__ref":"MediaResource:e0f5b935afe0ed12797ff7e1aea06d63"}},"mixtapeMetadata":null,"markups":[],"dropCapImage":null},"Paragraph:3db45c14a78c_30":{"id":"3db45c14a78c_30","__typename":"Paragraph","name":"aa30","text":"When the document data or part of if comes from external services you can validate the response before executing database queries. If the request or external response structure is not defined you can use a generic type anyand insert the data as it in a schemaless database. Mongoose also can store generic types with mixed type but generally this is used when your document have defined fields and one or more generic. If all document is generic, as is in standard NoSQL (schemaless), there is no point of using Mongoose, at least in that collection.","type":"P","href":null,"layout":null,"metadata":null,"hasDropCap":null,"iframe":null,"mixtapeMetadata":null,"markups":[{"__typename":"Markup","start":219,"end":222,"type":"CODE","href":null,"anchorType":null,"userId":null,"linkMetadata":null},{"__typename":"Markup","start":317,"end":327,"type":"A","href":"https:\u002F\u002Fmongoosejs.com\u002Fdocs\u002Fschematypes.html#mixed","anchorType":"LINK","userId":null,"linkMetadata":null}],"dropCapImage":null},"Paragraph:3db45c14a78c_31":{"id":"3db45c14a78c_31","__typename":"Paragraph","name":"1360","text":"Indexes","type":"H3","href":null,"layout":null,"metadata":null,"hasDropCap":null,"iframe":null,"mixtapeMetadata":null,"markups":[],"dropCapImage":null},"Paragraph:3db45c14a78c_32":{"id":"3db45c14a78c_32","__typename":"Paragraph","name":"6d3a","text":"You can create indexes to your collection using the createIndex method. Acording to MongoDB documentation:","type":"P","href":null,"layout":null,"metadata":null,"hasDropCap":null,"iframe":null,"mixtapeMetadata":null,"markups":[{"__typename":"Markup","start":52,"end":63,"type":"CODE","href":null,"anchorType":null,"userId":null,"linkMetadata":null},{"__typename":"Markup","start":84,"end":105,"type":"A","href":"https:\u002F\u002Fdocs.mongodb.com\u002Fmanual\u002Findexes\u002F#create-an-index","anchorType":"LINK","userId":null,"linkMetadata":null}],"dropCapImage":null},"Paragraph:3db45c14a78c_33":{"id":"3db45c14a78c_33","__typename":"Paragraph","name":"0d1b","text":"The db.collection.createIndexmethod only creates an index if an index of the same specification does not already exist.","type":"BQ","href":null,"layout":null,"metadata":null,"hasDropCap":null,"iframe":null,"mixtapeMetadata":null,"markups":[{"__typename":"Markup","start":4,"end":29,"type":"CODE","href":null,"anchorType":null,"userId":null,"linkMetadata":null},{"__typename":"Markup","start":4,"end":29,"type":"EM","href":null,"anchorType":null,"userId":null,"linkMetadata":null}],"dropCapImage":null},"Paragraph:3db45c14a78c_34":{"id":"3db45c14a78c_34","__typename":"Paragraph","name":"ce87","text":"So you don’t need to worry about executing this method multiple times. Here I’m creating a unique index on the email field with sparse to skip documents that do not have the indexed field when the connection is set.","type":"P","href":null,"layout":null,"metadata":null,"hasDropCap":null,"iframe":null,"mixtapeMetadata":null,"markups":[{"__typename":"Markup","start":91,"end":97,"type":"CODE","href":null,"anchorType":null,"userId":null,"linkMetadata":null},{"__typename":"Markup","start":128,"end":134,"type":"CODE","href":null,"anchorType":null,"userId":null,"linkMetadata":null},{"__typename":"Markup","start":128,"end":134,"type":"A","href":"https:\u002F\u002Fdocs.mongodb.com\u002Fmanual\u002Findexes\u002F#sparse-indexes","anchorType":"LINK","userId":null,"linkMetadata":null},{"__typename":"Markup","start":158,"end":164,"type":"EM","href":null,"anchorType":null,"userId":null,"linkMetadata":null}],"dropCapImage":null},"Paragraph:3db45c14a78c_35":{"id":"3db45c14a78c_35","__typename":"Paragraph","name":"41bc","text":"database-module.ts with indexes","type":"IFRAME","href":null,"layout":"INSET_CENTER","metadata":null,"hasDropCap":null,"iframe":{"__typename":"Iframe","mediaResource":{"__ref":"MediaResource:47ac06947cf0d19200806d87441d3148"}},"mixtapeMetadata":null,"markups":[],"dropCapImage":null},"Paragraph:3db45c14a78c_36":{"id":"3db45c14a78c_36","__typename":"Paragraph","name":"5b88","text":"Conclusion","type":"H3","href":null,"layout":null,"metadata":null,"hasDropCap":null,"iframe":null,"mixtapeMetadata":null,"markups":[],"dropCapImage":null},"Paragraph:3db45c14a78c_37":{"id":"3db45c14a78c_37","__typename":"Paragraph","name":"82d7","text":"Using NodeJS native driver is easy. Some parts are similar to Mongoose’s implementation with the advantage of using native MongoDB syntax, which you can directly use on MongoDB shell or clients and have a better performance. Also you use less dependencies (3) compared to Mongoose (11 including the native driver) so the application size is smaller and you don’t have to worry about catching a bug in any of those dependencies or theirs dependencies. Here is a repository with the complete application code https:\u002F\u002Fgithub.com\u002Fguizoxxv\u002Fnestjs-native-mongodb-driver-test.","type":"P","href":null,"layout":null,"metadata":null,"hasDropCap":null,"iframe":null,"mixtapeMetadata":null,"markups":[{"__typename":"Markup","start":507,"end":568,"type":"A","href":"https:\u002F\u002Fgithub.com\u002Fguizoxxv\u002Fnestjs-native-mongodb-driver-test","anchorType":"LINK","userId":null,"linkMetadata":null}],"dropCapImage":null},"ImageMetadata:1*jiqgT2HxAe1c_48yEdcZwQ.png":{"id":"1*jiqgT2HxAe1c_48yEdcZwQ.png","__typename":"ImageMetadata","originalHeight":942,"originalWidth":1765,"focusPercentX":null,"focusPercentY":null,"alt":null},"ImageMetadata:1*CTi-n23g998yqJFNrqBhaw.jpeg":{"id":"1*CTi-n23g998yqJFNrqBhaw.jpeg","__typename":"ImageMetadata","originalHeight":301,"originalWidth":550,"focusPercentX":null,"focusPercentY":null,"alt":null},"MediaResource:76a90b8c865f2ebe5817c0bd5a38470f":{"id":"76a90b8c865f2ebe5817c0bd5a38470f","__typename":"MediaResource","iframeSrc":"","iframeHeight":0,"iframeWidth":0,"title":""},"MediaResource:a68a3deb5080cc497e81875f641092a3":{"id":"a68a3deb5080cc497e81875f641092a3","__typename":"MediaResource","iframeSrc":"","iframeHeight":0,"iframeWidth":0,"title":""},"MediaResource:f74f85339c421d2b9d228ed4ed05c5d6":{"id":"f74f85339c421d2b9d228ed4ed05c5d6","__typename":"MediaResource","iframeSrc":"","iframeHeight":0,"iframeWidth":0,"title":""},"MediaResource:e0f5b935afe0ed12797ff7e1aea06d63":{"id":"e0f5b935afe0ed12797ff7e1aea06d63","__typename":"MediaResource","iframeSrc":"","iframeHeight":0,"iframeWidth":0,"title":""},"MediaResource:47ac06947cf0d19200806d87441d3148":{"id":"47ac06947cf0d19200806d87441d3148","__typename":"MediaResource","iframeSrc":"","iframeHeight":0,"iframeWidth":0,"title":""},"Tag:nestjs":{"id":"nestjs","__typename":"Tag","displayTitle":"Nestjs"},"Tag:mongodb":{"id":"mongodb","__typename":"Tag","displayTitle":"Mongodb"},"Tag:nodejs":{"id":"nodejs","__typename":"Tag","displayTitle":"Nodejs"},"Tag:mongodb-driver":{"id":"mongodb-driver","__typename":"Tag","displayTitle":"Mongodb Driver"},"Tag:mongoose":{"id":"mongoose","__typename":"Tag","displayTitle":"Mongoose"},"Post:9d82e377d55":{"id":"9d82e377d55","__typename":"Post","canonicalUrl":"","collection":null,"content({\"postMeteringOptions\":{\"referrer\":\"https:\u002F\u002Fwww.google.com\u002F\"}})":{"__typename":"PostContent","isLockedPreviewOnly":false,"validatedShareKey":"","bodyModel":{"__typename":"RichText","paragraphs":[{"__ref":"Paragraph:3db45c14a78c_0"},{"__ref":"Paragraph:3db45c14a78c_1"},{"__ref":"Paragraph:3db45c14a78c_2"},{"__ref":"Paragraph:3db45c14a78c_3"},{"__ref":"Paragraph:3db45c14a78c_4"},{"__ref":"Paragraph:3db45c14a78c_5"},{"__ref":"Paragraph:3db45c14a78c_6"},{"__ref":"Paragraph:3db45c14a78c_7"},{"__ref":"Paragraph:3db45c14a78c_8"},{"__ref":"Paragraph:3db45c14a78c_9"},{"__ref":"Paragraph:3db45c14a78c_10"},{"__ref":"Paragraph:3db45c14a78c_11"},{"__ref":"Paragraph:3db45c14a78c_12"},{"__ref":"Paragraph:3db45c14a78c_13"},{"__ref":"Paragraph:3db45c14a78c_14"},{"__ref":"Paragraph:3db45c14a78c_15"},{"__ref":"Paragraph:3db45c14a78c_16"},{"__ref":"Paragraph:3db45c14a78c_17"},{"__ref":"Paragraph:3db45c14a78c_18"},{"__ref":"Paragraph:3db45c14a78c_19"},{"__ref":"Paragraph:3db45c14a78c_20"},{"__ref":"Paragraph:3db45c14a78c_21"},{"__ref":"Paragraph:3db45c14a78c_22"},{"__ref":"Paragraph:3db45c14a78c_23"},{"__ref":"Paragraph:3db45c14a78c_24"},{"__ref":"Paragraph:3db45c14a78c_25"},{"__ref":"Paragraph:3db45c14a78c_26"},{"__ref":"Paragraph:3db45c14a78c_27"},{"__ref":"Paragraph:3db45c14a78c_28"},{"__ref":"Paragraph:3db45c14a78c_29"},{"__ref":"Paragraph:3db45c14a78c_30"},{"__ref":"Paragraph:3db45c14a78c_31"},{"__ref":"Paragraph:3db45c14a78c_32"},{"__ref":"Paragraph:3db45c14a78c_33"},{"__ref":"Paragraph:3db45c14a78c_34"},{"__ref":"Paragraph:3db45c14a78c_35"},{"__ref":"Paragraph:3db45c14a78c_36"},{"__ref":"Paragraph:3db45c14a78c_37"}],"sections":[{"__typename":"Section","name":"b755","startIndex":0,"textLayout":null,"imageLayout":null,"backgroundImage":null,"videoLayout":null,"backgroundVideo":null}]}},"creator":{"__ref":"User:12f957494f66"},"customStyleSheet":null,"firstPublishedAt":1592009643519,"isLocked":false,"isPublished":true,"isShortform":false,"isEmail":false,"layerCake":4,"primaryTopic":null,"title":"NestJS with MongoDB native driver","mediumUrl":"https:\u002F\u002Fmedium.com\u002F@gusiol\u002Fnestjs-with-mongodb-native-driver-9d82e377d55","isLimitedState":false,"visibility":"PUBLIC","license":"ALL_RIGHTS_RESERVED","allowResponses":true,"newsletterId":"","sequence":null,"tags":[{"__ref":"Tag:nestjs"},{"__ref":"Tag:mongodb"},{"__ref":"Tag:nodejs"},{"__ref":"Tag:mongodb-driver"},{"__ref":"Tag:mongoose"}],"topics":[{"__typename":"Topic","topicId":"63c6f1f93ee","name":"Javascript","slug":"javascript"}],"viewerClapCount":null,"inResponseToPostResult":null,"socialTitle":"","socialDek":"","metaDescription":"","latestPublishedAt":1592254566320,"readingTime":3.900314465408805,"previewContent":{"__typename":"PreviewContent","subtitle":"Let’s build a application with NestJS and MongoDB."},"previewImage":{"__ref":"ImageMetadata:1*jiqgT2HxAe1c_48yEdcZwQ.png"},"creatorPartnerProgramEnrollmentStatus":"PERMISSION_DENIED","clapCount":14,"lockedSource":"LOCKED_POST_SOURCE_NONE","isSuspended":false,"pendingCollection":null,"statusForCollection":null,"pinnedAt":0,"pinnedByCreatorAt":0,"curationEligibleAt":1592009642072,"shareKey":null,"responsesCount":1,"collaborators":[],"translationSourcePost":null,"inResponseToMediaResource":null,"isDistributionAlertDismissed":true,"audioVersionUrl":"","seoTitle":"","updatedAt":1592401926279,"shortformType":"SHORTFORM_TYPE_LINK","structuredData":"","seoDescription":"Implementing NestJS with MongoDB using NodeJS native driver as an alternative to Mongoose with better performance, native MongoDB syntax and simple and intuitive coding experience.","postResponses":{"__typename":"PostResponses","count":1},"latestPublishedVersion":"3db45c14a78c","readingList":"READING_LIST_NONE","voterCount":9,"recommenders":[]}}</script><script src="./NestJS with MongoDB native driver _ by Gustavo Simões _ Medium_files/manifest.5594cd5b.js.download"></script><script src="./NestJS with MongoDB native driver _ by Gustavo Simões _ Medium_files/vendors_main.cba54eba.chunk.js.download"></script><script src="./NestJS with MongoDB native driver _ by Gustavo Simões _ Medium_files/main.88024a24.chunk.js.download"></script><script src="./NestJS with MongoDB native driver _ by Gustavo Simões _ Medium_files/vendors_instrumentation.937ef40a.chunk.js.download"></script>
<script src="./NestJS with MongoDB native driver _ by Gustavo Simões _ Medium_files/instrumentation.1a5d8d0b.chunk.js.download"></script>
<script src="./NestJS with MongoDB native driver _ by Gustavo Simões _ Medium_files/reporting.cb7b50b3.chunk.js.download"></script>
<script src="./NestJS with MongoDB native driver _ by Gustavo Simões _ Medium_files/vendors_AMPPost_CollectionAbout_CollectionHomepage_CollectionHomepagePreview_CollectionNewShortformE_74d53cd4.ee0a8adb.chunk.js.download"></script>
<script src="./NestJS with MongoDB native driver _ by Gustavo Simões _ Medium_files/vendors_AMPPost_CollectionHomepage_CollectionHomepagePreview_CollectionStyleEditor_CollectionTagged__42f7530a.0dd746e8.chunk.js.download"></script>
<script src="./NestJS with MongoDB native driver _ by Gustavo Simões _ Medium_files/vendors_AMPPost_CollectionNewShortformEditor_CollectionPostShortformEditor_DebugCachedPost_Post_Sequ_19f09bd3.1bf7a765.chunk.js.download"></script>
<script src="./NestJS with MongoDB native driver _ by Gustavo Simões _ Medium_files/AMPPost_CollectionHomepage_CollectionHomepagePreview_CollectionNewShortformEditor_CollectionPostShor_250d4f3e.058a6b0f.chunk.js.download"></script>
<script src="./NestJS with MongoDB native driver _ by Gustavo Simões _ Medium_files/Post.6a773d4e.chunk.js.download"></script><script>window.main();</script><script src="./NestJS with MongoDB native driver _ by Gustavo Simões _ Medium_files/p.js.download" async="" id="parsely-cf"></script><iframe src="./NestJS with MongoDB native driver _ by Gustavo Simões _ Medium_files/a16180790160.html" hidden="" tabindex="-1" title="Optimizely Internal Frame" height="0" width="0" style="display: none;"></iframe></body></html>